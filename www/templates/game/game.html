<ion-view view-title="{{ 'HOME.GAME.VIEW-TITLE' | translate }}">
  <ion-content>
    <div class="game-board">
        <div class="row">
            <div class="col col-66">
                <div class="game-board-cell game-board-cell--scoreboard" ng-click="game.scoreDetailsModal.show()">
                    <div class="row">
                        <div class="col col-{{game.scoreboard.colWidthPercentage}}" ng-repeat="player in game.scoreboard.rowOne">
                            <div class="game-board-cell {{player.guestColor}}" ng-class="{'guest': player.guestColor, 'has-avatar': player.face, 'active': player === game.activePlayer, 'winner': player.endPosition === 1, 'finished': player.endPosition > 1, 'disqualified': player.disqualified}">
                                <span ng-if="player.endPosition <= 0 && !player.disqualified">{{player.score}}</span>
                                <i ng-if="player.endPosition > 0 || player.disqualified" class="icon" ng-class="{'ion-trophy': player.endPosition == 1, 'ion-checkmark': player.endPosition > 1, 'ion-close': player.disqualified}"></i>
                                <img ng-if="player.face" ng-src="{{player.face}}">
                            </div>
                        </div>
                    </div>
                    <div ng-if="game.scoreboard.rowTwo.length" class="row">
                        <div class="col col-{{game.scoreboard.colWidthPercentage}}" ng-repeat="player in game.scoreboard.rowTwo">
                            <div class="game-board-cell {{player.guestColor}}" ng-class="{'guest': player.guestColor, 'has-avatar': player.face, 'active': player === game.activePlayer, 'winner': player.endPosition === 1, 'finished': player.endPosition > 1, 'disqualified': player.disqualified}">
                                <span ng-if="player.endPosition <= 0 && !player.disqualified">{{player.score}}</span>
                                <i ng-if="player.endPosition > 0 || player.disqualified" class="icon" ng-class="{'ion-trophy': player.endPosition == 1, 'ion-checkmark': player.endPosition > 1, 'ion-close': player.disqualified}"></i>
                                <img ng-if="player.face" ng-src="{{player.face}}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col col-33">
                <div class="game-board-cell game-board-cell--settings" ng-click="game.showActionSheet()">
                    <button class="button button-icon icon ion-ios-gear-outline"></button>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col col-66">
                <div class="game-board-cell game-board-cell--player" ng-class="{'active': game.activatedScore > -1}" ng-click="game.processThrow();">
                    <ion-item class="item-avatar item-icon-right" type="item-text-wrap" ng-class="game.activePlayer.activedAvatarStatus">
                        <img ng-if="game.activePlayer.face"  ng-src="{{game.activePlayer.face}}">
                        <div ng-if="!game.activePlayer.face" class="item-avatar__face-placeholder {{game.activePlayer.guestColor}}"></div>
                        <h2>{{game.activePlayer.firstName}} {{game.activePlayer.lastName}}</h2>
                        <p>
                            <span ng-if="game.activatedScore > -1">
                                <i ng-class="{'miss': !game.activatedScore}">&nbsp;{{game.activatedScore}}&nbsp;</i>
                                <i ng-if="game.activePlayer.scoreHistory.length">&#124;</i>
                            </span>
                            <span ng-repeat="throw in game.activePlayer.scoreHistory track by $index">
                                <i ng-if="$index > 0">&#124;</i>
                                <i ng-class="{'miss': !game.activePlayer.scoreHistory[$index]}">&nbsp;{{throw}}&nbsp;</i>
                            </span>
                        </p>
                        <i ng-show="game.activatedScore > -1" class="icon ion-chevron-right icon-accessory"></i>
                      </ion-item>
                </div>
            </div>
            <div class="col col-33">
                <div class="game-board-cell game-board-cell--score" ng-class="{'active': game.activatedScore === 0}" ng-click="game.activateScore(0)">
                    0
                </div>
            </div>
        </div>
        <!-- buttons 1 - 12 -->
        <div class="row" ng-repeat="i in [0, 1, 2, 3] track by $index">
            <div class="col col-33" ng-repeat="j in [1, 2, 3] track by $index">
                <div class="game-board-cell game-board-cell--score" ng-class="{'active': game.activatedScore === i*3 + j}" ng-click="game.activateScore(i*3 + j)">
                    {{i*3 + j}}
                </div>
            </div>
        </div>
    </div>
  </ion-content>
</ion-view>
