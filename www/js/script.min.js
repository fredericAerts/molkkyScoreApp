!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof exports?module.exports=t():t()}(this,function(){function e(e){"use strict";var t=e.storageKey(),n=e.storage(),a=function(){var a=e.preferredLanguage();angular.isString(a)?e.use(a):n.put(t,e.use())};a.displayName="fallbackFromIncorrectStorageValue",n?n.get(t)?e.use(n.get(t))["catch"](a):a():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}function t(){"use strict";var e,t,n=null,a=!1,r=!1;t={sanitize:function(e,t){return"text"===t&&(e=o(e)),e},escape:function(e,t){return"text"===t&&(e=i(e)),e},sanitizeParameters:function(e,t){return"params"===t&&(e=s(e,o)),e},escapeParameters:function(e,t){return"params"===t&&(e=s(e,i)),e}},t.escaped=t.escapeParameters,this.addStrategy=function(e,n){return t[e]=n,this},this.removeStrategy=function(e){return delete t[e],this},this.useStrategy=function(e){return a=!0,n=e,this},this.$get=["$injector","$log",function(i,o){var s={},c=function(e,n,a){return angular.forEach(a,function(a){if(angular.isFunction(a))e=a(e,n);else if(angular.isFunction(t[a]))e=t[a](e,n);else{if(!angular.isString(t[a]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+a+"'");if(!s[t[a]])try{s[t[a]]=i.get(t[a])}catch(r){throw s[t[a]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+a+"'")}e=s[t[a]](e,n)}}),e},u=function(){a||r||(o.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),r=!0)};return i.has("$sanitize")&&(e=i.get("$sanitize")),{useStrategy:function(e){return function(t){e.useStrategy(t)}}(this),sanitize:function(e,t,a){if(n||u(),arguments.length<3&&(a=n),!a)return e;var r=angular.isArray(a)?a:[a];return c(e,t,r)}}}];var i=function(e){var t=angular.element("<div></div>");return t.text(e),t.html()},o=function(t){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return e(t)},s=function(e,t,n){if(angular.isObject(e)){var a=angular.isArray(e)?[]:{};if(n){if(n.indexOf(e)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else n=[];return n.push(e),angular.forEach(e,function(e,r){angular.isFunction(e)||(a[r]=s(e,t,n))}),n.splice(-1,1),a}return angular.isNumber(e)?e:t(e)}}function n(e,t,n,a){"use strict";var r,i,o,s,c,u,l,f,d,p,E,g,m,v,S,h,T={},A=[],y=e,M=[],I="translate-cloak",O=!1,R=!1,w=".",P=!1,L=!1,N=0,C=!0,_="default",b={"default":function(e){return(e||"").split("-").join("_")},java:function(e){var t=(e||"").split("-").join("_"),n=t.split("_");return n.length>1?n[0].toLowerCase()+"_"+n[1].toUpperCase():t},bcp47:function(e){var t=(e||"").split("_").join("-"),n=t.split("-");return n.length>1?n[0].toLowerCase()+"-"+n[1].toUpperCase():t},"iso639-1":function(e){var t=(e||"").split("_").join("-"),n=t.split("-");return n[0].toLowerCase()}},D="2.11.1",$=function(){if(angular.isFunction(a.getLocale))return a.getLocale();var e,n,r=t.$get().navigator,i=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(r.languages))for(e=0;e<r.languages.length;e++)if(n=r.languages[e],n&&n.length)return n;for(e=0;e<i.length;e++)if(n=r[i[e]],n&&n.length)return n;return null};$.displayName="angular-translate/service: getFirstBrowserLanguage";var x=function(){var e=$()||"";return b[_]&&(e=b[_](e)),e};x.displayName="angular-translate/service: getLocale";var G=function(e,t){for(var n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1},H=function(){return this.toString().replace(/^\s+|\s+$/g,"")},k=function(e){if(e){for(var t=[],n=angular.lowercase(e),a=0,r=A.length;a<r;a++)t.push(angular.lowercase(A[a]));if(G(t,n)>-1)return e;if(i){var o;for(var s in i)if(i.hasOwnProperty(s)){var c=!1,u=Object.prototype.hasOwnProperty.call(i,s)&&angular.lowercase(s)===angular.lowercase(e);if("*"===s.slice(-1)&&(c=s.slice(0,-1)===e.slice(0,s.length-1)),(u||c)&&(o=i[s],G(t,angular.lowercase(o))>-1))return o}}var l=e.split("_");return l.length>1&&G(t,angular.lowercase(l[0]))>-1?l[0]:void 0}},F=function(e,t){if(!e&&!t)return T;if(e&&!t){if(angular.isString(e))return T[e]}else angular.isObject(T[e])||(T[e]={}),angular.extend(T[e],j(t));return this};this.translations=F,this.cloakClassName=function(e){return e?(I=e,this):I},this.nestedObjectDelimeter=function(e){return e?(w=e,this):w};var j=function(e,t,n,a){var r,i,o,s;t||(t=[]),n||(n={});for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s=e[r],angular.isObject(s)?j(s,t.concat(r),n,r):(i=t.length?""+t.join(w)+w+r:r,t.length&&r===a&&(o=""+t.join(w),n[o]="@:"+i),n[i]=s));return n};j.displayName="flatObject",this.addInterpolation=function(e){return M.push(e),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(e){return p=e,this},this.useSanitizeValueStrategy=function(e){return n.useStrategy(e),this},this.preferredLanguage=function(e){return e?(Y(e),this):r};var Y=function(e){return e&&(r=e),r};this.translationNotFoundIndicator=function(e){return this.translationNotFoundIndicatorLeft(e),this.translationNotFoundIndicatorRight(e),this},this.translationNotFoundIndicatorLeft=function(e){return e?(m=e,this):m},this.translationNotFoundIndicatorRight=function(e){return e?(v=e,this):v},this.fallbackLanguage=function(e){return W(e),this};var W=function(e){return e?(angular.isString(e)?(s=!0,o=[e]):angular.isArray(e)&&(s=!1,o=e),angular.isString(r)&&G(o,r)<0&&o.push(r),this):s?o[0]:o};this.use=function(e){if(e){if(!T[e]&&!E)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+e+"'");return c=e,this}return c},this.resolveClientLocale=function(){return x()};var U=function(e){return e?(y=e,this):f?f+y:y};this.storageKey=U,this.useUrlLoader=function(e,t){return this.useLoader("$translateUrlLoader",angular.extend({url:e},t))},this.useStaticFilesLoader=function(e){return this.useLoader("$translateStaticFilesLoader",e)},this.useLoader=function(e,t){return E=e,g=t||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(e){return l=e,this},this.storagePrefix=function(e){return e?(f=e,this):e},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(e){return d=e,this},this.usePostCompiling=function(e){return O=!!e,this},this.forceAsyncReload=function(e){return R=!!e,this},this.uniformLanguageTag=function(e){return e?angular.isString(e)&&(e={standard:e}):e={},_=e.standard,this},this.determinePreferredLanguage=function(e){var t=e&&angular.isFunction(e)?e():x();return r=A.length?k(t)||t:t,this},this.registerAvailableLanguageKeys=function(e,t){return e?(A=e,t&&(i=t),this):A},this.useLoaderCache=function(e){return e===!1?S=void 0:e===!0?S=!0:"undefined"==typeof e?S="$translationCache":e&&(S=e),this},this.directivePriority=function(e){return void 0===e?N:(N=e,this)},this.statefulFilter=function(e){return void 0===e?C:(C=e,this)},this.postProcess=function(e){return h=e?e:void 0,this},this.keepContent=function(e){return L=!!e,this},this.$get=["$log","$injector","$rootScope","$q",function(e,t,n,a){var i,f,_,b=t.get(p||"$translateDefaultInterpolation"),$=!1,V={},B={},X=function(e,t,n,s,u){!c&&r&&(c=r);var d=u&&u!==c?k(u)||u:c;if(u&&le(u),angular.isArray(e)){var p=function(e){for(var r={},i=[],o=function(e){var i=a.defer(),o=function(t){r[e]=t,i.resolve([e,t])};return X(e,t,n,s,u).then(o,o),i.promise},c=0,l=e.length;c<l;c++)i.push(o(e[c]));return a.all(i).then(function(){return r})};return p(e)}var E=a.defer();e&&(e=H.apply(e));var g=function(){var e=r?B[r]:B[d];if(f=0,l&&!e){var t=i.get(y);if(e=B[t],o&&o.length){var n=G(o,t);f=0===n?1:0,G(o,r)<0&&o.push(r)}}return e}();if(g){var m=function(){u||(d=c),oe(e,t,n,s,d).then(E.resolve,E.reject)};m.displayName="promiseResolved",g["finally"](m)}else oe(e,t,n,s,d).then(E.resolve,E.reject);return E.promise},z=function(e){return m&&(e=[m,e].join(" ")),v&&(e=[e,v].join(" ")),e},q=function(e){c=e,l&&i.put(X.storageKey(),c),n.$emit("$translateChangeSuccess",{language:e}),b.setLocale(c);var t=function(e,t){V[t].setLocale(c)};t.displayName="eachInterpolatorLocaleSetter",angular.forEach(V,t),n.$emit("$translateChangeEnd",{language:e})},K=function(e){if(!e)throw"No language key specified for loading.";var r=a.defer();n.$emit("$translateLoadingStart",{language:e}),$=!0;var i=S;"string"==typeof i&&(i=t.get(i));var o=angular.extend({},g,{key:e,$http:angular.extend({},{cache:i},g.$http)}),s=function(t){var a={};n.$emit("$translateLoadingSuccess",{language:e}),angular.isArray(t)?angular.forEach(t,function(e){angular.extend(a,j(e))}):angular.extend(a,j(t)),$=!1,r.resolve({key:e,table:a}),n.$emit("$translateLoadingEnd",{language:e})};s.displayName="onLoaderSuccess";var c=function(e){n.$emit("$translateLoadingError",{language:e}),r.reject(e),n.$emit("$translateLoadingEnd",{language:e})};return c.displayName="onLoaderError",t.get(E)(o).then(s,c),r.promise};if(l&&(i=t.get(l),!i.get||!i.put))throw new Error("Couldn't use storage '"+l+"', missing get() or put() method!");if(M.length){var J=function(e){var n=t.get(e);n.setLocale(r||c),V[n.getInterpolationIdentifier()]=n};J.displayName="interpolationFactoryAdder",angular.forEach(M,J)}var Q=function(e){var t=a.defer();if(Object.prototype.hasOwnProperty.call(T,e))t.resolve(T[e]);else if(B[e]){var n=function(e){F(e.key,e.table),t.resolve(e.table)};n.displayName="translationTableResolver",B[e].then(n,t.reject)}else t.reject();return t.promise},Z=function(e,t,n,r){var i=a.defer(),o=function(a){if(Object.prototype.hasOwnProperty.call(a,t)){r.setLocale(e);var o=a[t];if("@:"===o.substr(0,2))Z(e,o.substr(2),n,r).then(i.resolve,i.reject);else{var s=r.interpolate(a[t],n);s=ue(t,a[t],s,n,e),i.resolve(s)}r.setLocale(c)}else i.reject()};return o.displayName="fallbackTranslationResolver",Q(e).then(o,i.reject),i.promise},ee=function(e,t,n,a){var r,i=T[e];if(i&&Object.prototype.hasOwnProperty.call(i,t)){if(a.setLocale(e),r=a.interpolate(i[t],n),r=ue(t,i[t],r,n,e),"@:"===r.substr(0,2))return ee(e,r.substr(2),n,a);a.setLocale(c)}return r},te=function(e,n,a){if(d){var r=t.get(d)(e,c,n,a);return void 0!==r?r:e}return e},ne=function(e,t,n,r,i){var s=a.defer();if(e<o.length){var c=o[e];Z(c,t,n,r).then(function(e){s.resolve(e)},function(){return ne(e+1,t,n,r,i).then(s.resolve,s.reject)})}else i?s.resolve(i):d?s.resolve(te(t,n)):s.reject(te(t,n));return s.promise},ae=function(e,t,n,a){var r;if(e<o.length){var i=o[e];r=ee(i,t,n,a),r||(r=ae(e+1,t,n,a))}return r},re=function(e,t,n,a){return ne(_>0?_:f,e,t,n,a)},ie=function(e,t,n){return ae(_>0?_:f,e,t,n)},oe=function(e,t,n,r,i){var s=a.defer(),c=i?T[i]:T,u=n?V[n]:b;if(c&&Object.prototype.hasOwnProperty.call(c,e)){var l=c[e];if("@:"===l.substr(0,2))X(l.substr(2),t,n,r,i).then(s.resolve,s.reject);else{var f=u.interpolate(l,t);f=ue(e,l,f,t,i),s.resolve(f)}}else{var p;d&&!$&&(p=te(e,t,r)),i&&o&&o.length?re(e,t,u,r).then(function(e){s.resolve(e)},function(e){s.reject(z(e))}):d&&!$&&p?r?s.resolve(r):s.resolve(p):r?s.resolve(r):s.reject(z(e))}return s.promise},se=function(e,t,n,a){var r,i=a?T[a]:T,s=b;if(V&&Object.prototype.hasOwnProperty.call(V,n)&&(s=V[n]),i&&Object.prototype.hasOwnProperty.call(i,e)){var c=i[e];"@:"===c.substr(0,2)?r=se(c.substr(2),t,n,a):(r=s.interpolate(c,t),r=ue(e,c,r,t,a))}else{var u;d&&!$&&(u=te(e,t)),a&&o&&o.length?(f=0,r=ie(e,t,s)):r=d&&!$&&u?u:z(e)}return r},ce=function(e){u===e&&(u=void 0),B[e]=void 0},ue=function(e,n,a,r,i){var o=h;return o&&("string"==typeof o&&(o=t.get(o)),o)?o(e,n,a,r,i):a},le=function(e){T[e]||!E||B[e]||(B[e]=K(e).then(function(e){return F(e.key,e.table),e}))};X.preferredLanguage=function(e){return e&&Y(e),r},X.cloakClassName=function(){return I},X.nestedObjectDelimeter=function(){return w},X.fallbackLanguage=function(e){if(void 0!==e&&null!==e){if(W(e),E&&o&&o.length)for(var t=0,n=o.length;t<n;t++)B[o[t]]||(B[o[t]]=K(o[t]));X.use(X.use())}return s?o[0]:o},X.useFallbackLanguage=function(e){if(void 0!==e&&null!==e)if(e){var t=G(o,e);t>-1&&(_=t)}else _=0},X.proposedLanguage=function(){return u},X.storage=function(){return i},X.negotiateLocale=k,X.use=function(e){if(!e)return c;var t=a.defer();n.$emit("$translateChangeStart",{language:e});var r=k(e);return A.length>0&&!r?a.reject(e):(r&&(e=r),u=e,!R&&T[e]||!E||B[e]?B[e]?B[e].then(function(e){return u===e.key&&q(e.key),t.resolve(e.key),e},function(e){return!c&&o&&o.length>0?X.use(o[0]).then(t.resolve,t.reject):t.reject(e)}):(t.resolve(e),q(e)):(B[e]=K(e).then(function(n){return F(n.key,n.table),t.resolve(n.key),u===e&&q(n.key),n},function(e){return n.$emit("$translateChangeError",{language:e}),t.reject(e),n.$emit("$translateChangeEnd",{language:e}),a.reject(e)}),B[e]["finally"](function(){ce(e)})),t.promise)},X.resolveClientLocale=function(){return x()},X.storageKey=function(){return U()},X.isPostCompilingEnabled=function(){return O},X.isForceAsyncReloadEnabled=function(){return R},X.isKeepContent=function(){return L},X.refresh=function(e){function t(){i.resolve(),n.$emit("$translateRefreshEnd",{language:e})}function r(){i.reject(),n.$emit("$translateRefreshEnd",{language:e})}if(!E)throw new Error("Couldn't refresh translation table, no loader registered!");var i=a.defer();if(n.$emit("$translateRefreshStart",{language:e}),e)if(T[e]){var s=function(n){return F(n.key,n.table),e===c&&q(c),t(),n};s.displayName="refreshPostProcessor",K(e).then(s,r)}else r();else{var u=[],l={};if(o&&o.length)for(var f=0,d=o.length;f<d;f++)u.push(K(o[f])),l[o[f]]=!0;c&&!l[c]&&u.push(K(c));var p=function(e){T={},angular.forEach(e,function(e){F(e.key,e.table)}),c&&q(c),t()};p.displayName="refreshPostProcessor",a.all(u).then(p,r)}return i.promise},X.instant=function(e,t,n,a){var i=a&&a!==c?k(a)||a:c;if(null===e||angular.isUndefined(e))return e;if(a&&le(a),angular.isArray(e)){for(var s={},u=0,l=e.length;u<l;u++)s[e[u]]=X.instant(e[u],t,n,a);return s}if(angular.isString(e)&&e.length<1)return e;e&&(e=H.apply(e));var f,p=[];r&&p.push(r),i&&p.push(i),o&&o.length&&(p=p.concat(o));for(var E=0,g=p.length;E<g;E++){var S=p[E];if(T[S]&&"undefined"!=typeof T[S][e]&&(f=se(e,t,n,i)),"undefined"!=typeof f)break}return f||""===f||(m||v?f=z(e):(f=b.interpolate(e,t),d&&!$&&(f=te(e,t)))),f},X.versionInfo=function(){return D},X.loaderCache=function(){return S},X.directivePriority=function(){return N},X.statefulFilter=function(){return C},X.isReady=function(){return P};var fe=a.defer();fe.promise.then(function(){P=!0}),X.onReady=function(e){var t=a.defer();return angular.isFunction(e)&&t.promise.then(e),P?t.resolve():fe.promise.then(t.resolve),t.promise},X.getAvailableLanguageKeys=function(){return A.length>0?A:null};var de=n.$on("$translateReady",function(){fe.resolve(),de(),de=null}),pe=n.$on("$translateChangeEnd",function(){fe.resolve(),pe(),pe=null});if(E){if(angular.equals(T,{})&&X.use()&&X.use(X.use()),o&&o.length)for(var Ee=function(e){return F(e.key,e.table),n.$emit("$translateChangeEnd",{language:e.key}),e},ge=0,me=o.length;ge<me;ge++){var ve=o[ge];!R&&T[ve]||(B[ve]=K(ve).then(Ee))}}else n.$emit("$translateReady",{language:X.use()});return X}]}function a(e,t){"use strict";var n,a={},r="default";return a.setLocale=function(e){n=e},a.getInterpolationIdentifier=function(){return r},a.useSanitizeValueStrategy=function(e){return t.useStrategy(e),this},a.interpolate=function(n,a){a=a||{},a=t.sanitize(a,"params");var r;return angular.isNumber(n)?r=""+n:angular.isString(n)?(r=e(n)(a),r=t.sanitize(r,"text")):r="",r},a}function r(e,t,n,a,r,o){"use strict";var s=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:e.directivePriority(),compile:function(t,c){var u=c.translateValues?c.translateValues:void 0,l=c.translateInterpolation?c.translateInterpolation:void 0,f=t[0].outerHTML.match(/translate-value-+/i),d="^(.*)("+n.startSymbol()+".*"+n.endSymbol()+")(.*)",p="^(.*)"+n.startSymbol()+"(.*)"+n.endSymbol()+"(.*)";return function(t,E,g){t.interpolateParams={},t.preText="",t.postText="",t.translateNamespace=i(t);var m={},v=function(e,n,a){if(n.translateValues&&angular.extend(e,r(n.translateValues)(t.$parent)),f)for(var i in a)if(Object.prototype.hasOwnProperty.call(n,i)&&"translateValue"===i.substr(0,14)&&"translateValues"!==i){var o=angular.lowercase(i.substr(14,1))+i.substr(15);e[o]=a[i]}},S=function(e){if(angular.isFunction(S._unwatchOld)&&(S._unwatchOld(),S._unwatchOld=void 0),angular.equals(e,"")||!angular.isDefined(e)){var a=s.apply(E.text()),r=a.match(d);if(angular.isArray(r)){t.preText=r[1],t.postText=r[3],m.translate=n(r[2])(t.$parent);var i=a.match(p);angular.isArray(i)&&i[2]&&i[2].length&&(S._unwatchOld=t.$watch(i[2],function(e){m.translate=e,I()}))}else m.translate=a?a:void 0}else m.translate=e;I()},h=function(e){g.$observe(e,function(t){m[e]=t,I()})};v(t.interpolateParams,g,c);var T=!0;g.$observe("translate",function(e){"undefined"==typeof e?S(""):""===e&&T||(m.translate=e,I()),T=!1});for(var A in g)g.hasOwnProperty(A)&&"translateAttr"===A.substr(0,13)&&h(A);if(g.$observe("translateDefault",function(e){t.defaultText=e,I()}),u&&g.$observe("translateValues",function(e){e&&t.$parent.$watch(function(){angular.extend(t.interpolateParams,r(e)(t.$parent))})}),f){var y=function(e){g.$observe(e,function(n){var a=angular.lowercase(e.substr(14,1))+e.substr(15);t.interpolateParams[a]=n})};for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&"translateValue"===M.substr(0,14)&&"translateValues"!==M&&y(M)}var I=function(){for(var e in m)m.hasOwnProperty(e)&&void 0!==m[e]&&O(e,m[e],t,t.interpolateParams,t.defaultText,t.translateNamespace)},O=function(t,n,a,r,i,o){n?(o&&"."===n.charAt(0)&&(n=o+n),e(n,r,l,i,a.translateLanguage).then(function(e){R(e,a,!0,t)},function(e){R(e,a,!1,t)})):R(n,a,!1,t)},R=function(t,n,r,i){if(r||"undefined"!=typeof n.defaultText&&(t=n.defaultText),"translate"===i){(r||!r&&!e.isKeepContent()&&"undefined"==typeof g.translateKeepContent)&&E.empty().append(n.preText+t+n.postText);var o=e.isPostCompilingEnabled(),s="undefined"!=typeof c.translateCompile,u=s&&"false"!==c.translateCompile;(o&&!s||u)&&a(E.contents())(n)}else{var l=g.$attr[i];"data-"===l.substr(0,5)&&(l=l.substr(5)),l=l.substr(15),E.attr(l,t)}};(u||f||g.translateDefault)&&t.$watch("interpolateParams",I,!0);var w=t.$on("translateLanguageChanged",I),P=o.$on("$translateChangeSuccess",I);E.text().length?S(g.translate?g.translate:""):g.translate&&S(g.translate),I(),t.$on("$destroy",function(){w(),P()})}}}}function i(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?i(e.$parent):void 0}function o(e,t){"use strict";return{compile:function(n){var a=function(){n.addClass(e.cloakClassName())},r=function(){n.removeClass(e.cloakClassName())};return e.onReady(function(){r()}),a(),function(n,i,o){o.translateCloak&&o.translateCloak.length&&(o.$observe("translateCloak",function(t){e(t).then(r,a)}),t.$on("$translateChangeSuccess",function(){e(o.translateCloak).then(r,a)}))}}}}function s(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(e,t,n){e.translateNamespace=i(e),e.translateNamespace&&"."===n.translateNamespace.charAt(0)?e.translateNamespace+=n.translateNamespace:e.translateNamespace=n.translateNamespace}}}}}function i(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?i(e.$parent):void 0}function c(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(e,t,n){n.$observe("translateLanguage",function(t){e.translateLanguage=t}),e.$watch("translateLanguage",function(){e.$broadcast("translateLanguageChanged")})}}}}function u(e,t){"use strict";var n=function(n,a,r,i){return angular.isObject(a)||(a=e(a)(this)),t.instant(n,a,r,i)};return t.statefulFilter()&&(n.$stateful=!0),n}function l(e){"use strict";return e("translations")}return e.$inject=["$translate"],n.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],a.$inject=["$interpolate","$translateSanitization"],r.$inject=["$translate","$q","$interpolate","$compile","$parse","$rootScope"],o.$inject=["$translate","$rootScope"],u.$inject=["$parse","$translate"],l.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(e),e.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",t),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",n),n.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",a),a.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",r),r.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateCloak",o),o.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",s),s.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",c),c.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",u),u.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",l),l.displayName="$translationCache","pascalprecht.translate"}),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof exports?module.exports=t():t()}(this,function(){function e(e,t){"use strict";return function(n){if(!(n&&(angular.isArray(n.files)||angular.isString(n.prefix)&&angular.isString(n.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");n.files||(n.files=[{prefix:n.prefix,suffix:n.suffix}]);for(var a=function(a){if(!a||!angular.isString(a.prefix)||!angular.isString(a.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");return t(angular.extend({url:[a.prefix,n.key,a.suffix].join(""),method:"GET",params:""},n.$http)).then(function(e){return e.data},function(){return e.reject(n.key)})},r=[],i=n.files.length,o=0;o<i;o++)r.push(a({prefix:n.files[o].prefix,key:n.key,suffix:n.files[o].suffix}));return e.all(r).then(function(e){for(var t=e.length,n={},a=0;a<t;a++)for(var r in e[a])n[r]=e[a][r];return n})}}return e.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",e),e.displayName="$translateStaticFilesLoader","pascalprecht.translate"}),function(){function e(e){function t(t,n,a,r,i,o){for(;i>=0&&i<o;i+=e){var s=r?r[i]:i;a=n(a,t[s],s,t)}return a}return function(n,a,r,i){a=h(a,i,4);var o=!R(n)&&S.keys(n),s=(o||n).length,c=e>0?0:s-1;return arguments.length<3&&(r=n[o?o[c]:c],c+=e),t(n,a,r,o,c,s)}}function t(e){return function(t,n,a){n=T(n,a);for(var r=O(t),i=e>0?0:r-1;i>=0&&i<r;i+=e)if(n(t[i],i,t))return i;return-1}}function n(e,t,n){return function(a,r,i){var o=0,s=O(a);if("number"==typeof i)e>0?o=i>=0?i:Math.max(i+s,o):s=i>=0?Math.min(i+1,s):i+s+1;else if(n&&i&&s)return i=n(a,r),a[i]===r?i:-1;if(r!==r)return i=t(l.call(a,o,s),S.isNaN),i>=0?i+o:-1;for(i=e>0?o:s-1;i>=0&&i<s;i+=e)if(a[i]===r)return i;return-1}}function a(e,t){var n=C.length,a=e.constructor,r=S.isFunction(a)&&a.prototype||s,i="constructor";for(S.has(e,i)&&!S.contains(t,i)&&t.push(i);n--;)i=C[n],i in e&&e[i]!==r[i]&&!S.contains(t,i)&&t.push(i)}var r=this,i=r._,o=Array.prototype,s=Object.prototype,c=Function.prototype,u=o.push,l=o.slice,f=s.toString,d=s.hasOwnProperty,p=Array.isArray,E=Object.keys,g=c.bind,m=Object.create,v=function(){},S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):r._=S,S.VERSION="1.8.3";var h=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,r){return e.call(t,n,a,r)};case 4:return function(n,a,r,i){return e.call(t,n,a,r,i)}}return function(){return e.apply(t,arguments)}},T=function(e,t,n){return null==e?S.identity:S.isFunction(e)?h(e,t,n):S.isObject(e)?S.matcher(e):S.property(e)};S.iteratee=function(e,t){return T(e,t,1/0)};var A=function(e,t){return function(n){var a=arguments.length;if(a<2||null==n)return n;for(var r=1;r<a;r++)for(var i=arguments[r],o=e(i),s=o.length,c=0;c<s;c++){var u=o[c];t&&void 0!==n[u]||(n[u]=i[u])}return n}},y=function(e){if(!S.isObject(e))return{};if(m)return m(e);v.prototype=e;var t=new v;return v.prototype=null,t},M=function(e){return function(t){return null==t?void 0:t[e]}},I=Math.pow(2,53)-1,O=M("length"),R=function(e){var t=O(e);return"number"==typeof t&&t>=0&&t<=I};S.each=S.forEach=function(e,t,n){t=h(t,n);var a,r;if(R(e))for(a=0,r=e.length;a<r;a++)t(e[a],a,e);else{var i=S.keys(e);for(a=0,r=i.length;a<r;a++)t(e[i[a]],i[a],e)}return e},S.map=S.collect=function(e,t,n){t=T(t,n);for(var a=!R(e)&&S.keys(e),r=(a||e).length,i=Array(r),o=0;o<r;o++){var s=a?a[o]:o;i[o]=t(e[s],s,e)}return i},S.reduce=S.foldl=S.inject=e(1),S.reduceRight=S.foldr=e(-1),S.find=S.detect=function(e,t,n){var a;if(a=R(e)?S.findIndex(e,t,n):S.findKey(e,t,n),void 0!==a&&a!==-1)return e[a]},S.filter=S.select=function(e,t,n){var a=[];return t=T(t,n),S.each(e,function(e,n,r){t(e,n,r)&&a.push(e)}),a},S.reject=function(e,t,n){return S.filter(e,S.negate(T(t)),n)},S.every=S.all=function(e,t,n){t=T(t,n);for(var a=!R(e)&&S.keys(e),r=(a||e).length,i=0;i<r;i++){var o=a?a[i]:i;if(!t(e[o],o,e))return!1}return!0},S.some=S.any=function(e,t,n){t=T(t,n);for(var a=!R(e)&&S.keys(e),r=(a||e).length,i=0;i<r;i++){var o=a?a[i]:i;if(t(e[o],o,e))return!0}return!1},S.contains=S.includes=S.include=function(e,t,n,a){return R(e)||(e=S.values(e)),("number"!=typeof n||a)&&(n=0),S.indexOf(e,t,n)>=0},S.invoke=function(e,t){var n=l.call(arguments,2),a=S.isFunction(t);return S.map(e,function(e){var r=a?t:e[t];return null==r?r:r.apply(e,n)})},S.pluck=function(e,t){return S.map(e,S.property(t))},S.where=function(e,t){return S.filter(e,S.matcher(t))},S.findWhere=function(e,t){return S.find(e,S.matcher(t))},S.max=function(e,t,n){var a,r,i=-(1/0),o=-(1/0);if(null==t&&null!=e){e=R(e)?e:S.values(e);for(var s=0,c=e.length;s<c;s++)a=e[s],a>i&&(i=a)}else t=T(t,n),S.each(e,function(e,n,a){r=t(e,n,a),(r>o||r===-(1/0)&&i===-(1/0))&&(i=e,o=r)});return i},S.min=function(e,t,n){var a,r,i=1/0,o=1/0;if(null==t&&null!=e){e=R(e)?e:S.values(e);for(var s=0,c=e.length;s<c;s++)a=e[s],a<i&&(i=a)}else t=T(t,n),S.each(e,function(e,n,a){r=t(e,n,a),(r<o||r===1/0&&i===1/0)&&(i=e,o=r)});return i},S.shuffle=function(e){for(var t,n=R(e)?e:S.values(e),a=n.length,r=Array(a),i=0;i<a;i++)t=S.random(0,i),t!==i&&(r[i]=r[t]),r[t]=n[i];return r},S.sample=function(e,t,n){return null==t||n?(R(e)||(e=S.values(e)),e[S.random(e.length-1)]):S.shuffle(e).slice(0,Math.max(0,t))},S.sortBy=function(e,t,n){return t=T(t,n),S.pluck(S.map(e,function(e,n,a){return{value:e,index:n,criteria:t(e,n,a)}}).sort(function(e,t){var n=e.criteria,a=t.criteria;if(n!==a){if(n>a||void 0===n)return 1;if(n<a||void 0===a)return-1}return e.index-t.index}),"value")};var w=function(e){return function(t,n,a){var r={};return n=T(n,a),S.each(t,function(a,i){var o=n(a,i,t);e(r,a,o)}),r}};S.groupBy=w(function(e,t,n){S.has(e,n)?e[n].push(t):e[n]=[t]}),S.indexBy=w(function(e,t,n){e[n]=t}),S.countBy=w(function(e,t,n){S.has(e,n)?e[n]++:e[n]=1}),S.toArray=function(e){return e?S.isArray(e)?l.call(e):R(e)?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:R(e)?e.length:S.keys(e).length},S.partition=function(e,t,n){t=T(t,n);var a=[],r=[];return S.each(e,function(e,n,i){(t(e,n,i)?a:r).push(e)}),[a,r]},S.first=S.head=S.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:S.initial(e,e.length-t)},S.initial=function(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},S.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:S.rest(e,Math.max(0,e.length-t))},S.rest=S.tail=S.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var P=function(e,t,n,a){for(var r=[],i=0,o=a||0,s=O(e);o<s;o++){var c=e[o];if(R(c)&&(S.isArray(c)||S.isArguments(c))){t||(c=P(c,t,n));var u=0,l=c.length;for(r.length+=l;u<l;)r[i++]=c[u++]}else n||(r[i++]=c)}return r};S.flatten=function(e,t){return P(e,t,!1)},S.without=function(e){return S.difference(e,l.call(arguments,1))},S.uniq=S.unique=function(e,t,n,a){S.isBoolean(t)||(a=n,n=t,t=!1),null!=n&&(n=T(n,a));for(var r=[],i=[],o=0,s=O(e);o<s;o++){var c=e[o],u=n?n(c,o,e):c;t?(o&&i===u||r.push(c),i=u):n?S.contains(i,u)||(i.push(u),r.push(c)):S.contains(r,c)||r.push(c)}return r},S.union=function(){return S.uniq(P(arguments,!0,!0))},S.intersection=function(e){for(var t=[],n=arguments.length,a=0,r=O(e);a<r;a++){var i=e[a];if(!S.contains(t,i)){for(var o=1;o<n&&S.contains(arguments[o],i);o++);o===n&&t.push(i)}}return t},S.difference=function(e){var t=P(arguments,!0,!0,1);return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){return S.unzip(arguments)},S.unzip=function(e){for(var t=e&&S.max(e,O).length||0,n=Array(t),a=0;a<t;a++)n[a]=S.pluck(e,a);return n},S.object=function(e,t){for(var n={},a=0,r=O(e);a<r;a++)t?n[e[a]]=t[a]:n[e[a][0]]=e[a][1];return n},S.findIndex=t(1),S.findLastIndex=t(-1),S.sortedIndex=function(e,t,n,a){n=T(n,a,1);for(var r=n(t),i=0,o=O(e);i<o;){var s=Math.floor((i+o)/2);n(e[s])<r?i=s+1:o=s}return i},S.indexOf=n(1,S.findIndex,S.sortedIndex),S.lastIndexOf=n(-1,S.findLastIndex),S.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var a=Math.max(Math.ceil((t-e)/n),0),r=Array(a),i=0;i<a;i++,e+=n)r[i]=e;return r};var L=function(e,t,n,a,r){if(!(a instanceof t))return e.apply(n,r);var i=y(e.prototype),o=e.apply(i,r);return S.isObject(o)?o:i};S.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,l.call(arguments,1));if(!S.isFunction(e))throw new TypeError("Bind must be called on a function");var n=l.call(arguments,2),a=function(){return L(e,a,t,this,n.concat(l.call(arguments)))};return a},S.partial=function(e){var t=l.call(arguments,1),n=function(){for(var a=0,r=t.length,i=Array(r),o=0;o<r;o++)i[o]=t[o]===S?arguments[a++]:t[o];for(;a<arguments.length;)i.push(arguments[a++]);return L(e,n,this,this,i)};return n},S.bindAll=function(e){var t,n,a=arguments.length;if(a<=1)throw new Error("bindAll must be passed function names");for(t=1;t<a;t++)n=arguments[t],e[n]=S.bind(e[n],e);return e},S.memoize=function(e,t){var n=function(a){var r=n.cache,i=""+(t?t.apply(this,arguments):a);return S.has(r,i)||(r[i]=e.apply(this,arguments)),r[i]};return n.cache={},n},S.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=S.partial(S.delay,S,1),S.throttle=function(e,t,n){var a,r,i,o=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:S.now(),o=null,i=e.apply(a,r),o||(a=r=null)};return function(){var u=S.now();s||n.leading!==!1||(s=u);var l=t-(u-s);return a=this,r=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),s=u,i=e.apply(a,r),o||(a=r=null)):o||n.trailing===!1||(o=setTimeout(c,l)),i}},S.debounce=function(e,t,n){var a,r,i,o,s,c=function(){var u=S.now()-o;u<t&&u>=0?a=setTimeout(c,t-u):(a=null,n||(s=e.apply(i,r),a||(i=r=null)))};return function(){i=this,r=arguments,o=S.now();var u=n&&!a;return a||(a=setTimeout(c,t)),u&&(s=e.apply(i,r),i=r=null),s}},S.wrap=function(e,t){
return S.partial(t,e)},S.negate=function(e){return function(){return!e.apply(this,arguments)}},S.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,a=e[t].apply(this,arguments);n--;)a=e[n].call(this,a);return a}},S.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},S.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},S.once=S.partial(S.before,2);var N=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];S.keys=function(e){if(!S.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)S.has(e,n)&&t.push(n);return N&&a(e,t),t},S.allKeys=function(e){if(!S.isObject(e))return[];var t=[];for(var n in e)t.push(n);return N&&a(e,t),t},S.values=function(e){for(var t=S.keys(e),n=t.length,a=Array(n),r=0;r<n;r++)a[r]=e[t[r]];return a},S.mapObject=function(e,t,n){t=T(t,n);for(var a,r=S.keys(e),i=r.length,o={},s=0;s<i;s++)a=r[s],o[a]=t(e[a],a,e);return o},S.pairs=function(e){for(var t=S.keys(e),n=t.length,a=Array(n),r=0;r<n;r++)a[r]=[t[r],e[t[r]]];return a},S.invert=function(e){for(var t={},n=S.keys(e),a=0,r=n.length;a<r;a++)t[e[n[a]]]=n[a];return t},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=A(S.allKeys),S.extendOwn=S.assign=A(S.keys),S.findKey=function(e,t,n){t=T(t,n);for(var a,r=S.keys(e),i=0,o=r.length;i<o;i++)if(a=r[i],t(e[a],a,e))return a},S.pick=function(e,t,n){var a,r,i={},o=e;if(null==o)return i;S.isFunction(t)?(r=S.allKeys(o),a=h(t,n)):(r=P(arguments,!1,!1,1),a=function(e,t,n){return t in n},o=Object(o));for(var s=0,c=r.length;s<c;s++){var u=r[s],l=o[u];a(l,u,o)&&(i[u]=l)}return i},S.omit=function(e,t,n){if(S.isFunction(t))t=S.negate(t);else{var a=S.map(P(arguments,!1,!1,1),String);t=function(e,t){return!S.contains(a,t)}}return S.pick(e,t,n)},S.defaults=A(S.allKeys,!0),S.create=function(e,t){var n=y(e);return t&&S.extendOwn(n,t),n},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isMatch=function(e,t){var n=S.keys(t),a=n.length;if(null==e)return!a;for(var r=Object(e),i=0;i<a;i++){var o=n[i];if(t[o]!==r[o]||!(o in r))return!1}return!0};var _=function(e,t,n,a){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var r=f.call(e);if(r!==f.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var i="[object Array]"===r;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(S.isFunction(o)&&o instanceof o&&S.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],a=a||[];for(var c=n.length;c--;)if(n[c]===e)return a[c]===t;if(n.push(e),a.push(t),i){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!_(e[c],t[c],n,a))return!1}else{var u,l=S.keys(e);if(c=l.length,S.keys(t).length!==c)return!1;for(;c--;)if(u=l[c],!S.has(t,u)||!_(e[u],t[u],n,a))return!1}return n.pop(),a.pop(),!0};S.isEqual=function(e,t){return _(e,t)},S.isEmpty=function(e){return null==e||(R(e)&&(S.isArray(e)||S.isString(e)||S.isArguments(e))?0===e.length:0===S.keys(e).length)},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=p||function(e){return"[object Array]"===f.call(e)},S.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},S.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){S["is"+e]=function(t){return f.call(t)==="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return S.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(S.isFunction=function(e){return"function"==typeof e||!1}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!==+e},S.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===f.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return null!=e&&d.call(e,t)},S.noConflict=function(){return r._=i,this},S.identity=function(e){return e},S.constant=function(e){return function(){return e}},S.noop=function(){},S.property=M,S.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},S.matcher=S.matches=function(e){return e=S.extendOwn({},e),function(t){return S.isMatch(t,e)}},S.times=function(e,t,n){var a=Array(Math.max(0,e));t=h(t,n,1);for(var r=0;r<e;r++)a[r]=t(r);return a},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},S.now=Date.now||function(){return(new Date).getTime()};var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=S.invert(b),$=function(e){var t=function(t){return e[t]},n="(?:"+S.keys(e).join("|")+")",a=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,a.test(e)?e.replace(r,t):e}};S.escape=$(b),S.unescape=$(D),S.result=function(e,t,n){var a=null==e?void 0:e[t];return void 0===a&&(a=n),S.isFunction(a)?a.call(e):a};var x=0;S.uniqueId=function(e){var t=++x+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},k=/\\|'|\r|\n|\u2028|\u2029/g,F=function(e){return"\\"+H[e]};S.template=function(e,t,n){!t&&n&&(t=n),t=S.defaults({},t,S.templateSettings);var a=RegExp([(t.escape||G).source,(t.interpolate||G).source,(t.evaluate||G).source].join("|")+"|$","g"),r=0,i="__p+='";e.replace(a,function(t,n,a,o,s){return i+=e.slice(r,s).replace(k,F),r=s+t.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":a?i+="'+\n((__t=("+a+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(s){throw s.source=i,s}var c=function(e){return o.call(this,e,S)},u=t.variable||"obj";return c.source="function("+u+"){\n"+i+"}",c},S.chain=function(e){var t=S(e);return t._chain=!0,t};var j=function(e,t){return e._chain?S(t).chain():t};S.mixin=function(e){S.each(S.functions(e),function(t){var n=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),j(this,n.apply(S,e))}})},S.mixin(S),S.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];S.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],j(this,n)}}),S.each(["concat","join","slice"],function(e){var t=o[e];S.prototype[e]=function(){return j(this,t.apply(this._wrapped,arguments))}}),S.prototype.value=function(){return this._wrapped},S.prototype.valueOf=S.prototype.toJSON=S.prototype.value,S.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return S})}.call(this),angular.module("molkkyscore",["ionic","ngCordova","pascalprecht.translate"]),function(){function e(e,t,a,r){e.decorator("$exceptionHandler",n),t.useStaticFilesLoader({prefix:r+"/",suffix:".json"}).preferredLanguage("english"),a.tabs.style("standard"),a.tabs.position("bottom")}function t(e,t,n,a,r,i,o,s){e.imagesRoot=t,window.cordova||a.initBrowserDev(),n.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&window.StatusBar.styleDefault(),window.cordova&&a.initDatabase().then(function(){var t=[];a.initPlayers().then(function(n){a.initTeams(n).then(function(r){n.forEach(function(e){t.push(a.initPlayerStatistics(e))}),r.forEach(function(e){t.push(a.initTeamStatistics(e))}),i.all([t]).then(function(){e.$broadcast("appInitialized")})})}),a.initOverallStatistics(),a.initGameSettings(),a.initAppSettings().then(function(e){r.use(e.language)}),a.initGameTutorial()},function(e){console.log(e.message)})})}function n(e){return function(t,n){e(t,n)}}angular.module("molkkyscore").config(e).run(t),e.$inject=["$provide","$translateProvider","$ionicConfigProvider","LANGUAGES_ROOT"],t.$inject=["$rootScope","IMAGES_ROOT","$ionicPlatform","dataService","$translate","$q","statisticsService","loadingService"],n.$inject=["$delegate"]}(),function(){function e(e,t,n){t.state("game",{url:"/game",templateUrl:e+"/game/game.html",controller:"GameCtrl as game",cache:!1}).state("tab",{url:"/tab","abstract":!0,templateUrl:e+"/layout/tabs.html"}).state("tab.home",{url:"/home",views:{home:{templateUrl:e+"/home/home.html",controller:"HomeCtrl as home"}}}).state("tab.settings",{url:"/home/settings",templateUrl:e+"/settings/settings.html",views:{home:{templateUrl:e+"/settings/settings.html",controller:"SettingsCtrl as settings"}}}).state("tab.statistics",{url:"/statistics",views:{statistics:{templateUrl:e+"/statistics/statistics.html",controller:"StatisticsCtrl as statistics"}}}).state("tab.statistics-listing",{url:"/statistics/:metricId",views:{statistics:{templateUrl:e+"/statistics/statistics-listing.html",controller:"StatisticsListingCtrl as listing"}}}).state("tab.players",{url:"/players",views:{players:{templateUrl:e+"/players/players.html",controller:"PlayersCtrl as players"}}}).state("tab.player-detail",{url:"/players/:playerId",views:{players:{templateUrl:e+"/players/player-detail.html",controller:"PlayerDetailCtrl as playerDetail"}}}).state("tab.team-detail",{url:"/players/t/:teamId",views:{players:{templateUrl:e+"/players/team-detail.html",controller:"TeamDetailCtrl as teamDetail"}}}),n.otherwise("/tab/home")}angular.module("molkkyscore").config(e),e.$inject=["TEMPLATES_ROOT","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("molkkyscore").constant("TEMPLATES_ROOT","templates").constant("LANGUAGES_ROOT","languages").constant("IMAGES_ROOT","img")}(),function(){"use strict";function e(e,t,n){function a(n,a,r,c){e.show({buttons:[{text:t.instant("HOME.GAME.ACTION-SHEET.GAME-RULES.BUTTON")},{text:t.instant("HOME.GAME.ACTION-SHEET.RESTART.BUTTON"),className:a?"":"disabled"},{text:t.instant("HOME.GAME.ACTION-SHEET.NEW.BUTTON")},{text:t.instant("HOME.GAME.ACTION-SHEET.UNDO.BUTTON"),className:a?"":"disabled"},{text:t.instant("HOME.GAME.ACTION-SHEET.EXIT.BUTTON")}],titleText:t.instant("HOME.GAME.ACTION-SHEET.TITLE"),cancelText:t.instant("HOME.GAME.ACTION-SHEET.CONTINUE.BUTTON"),cancel:function(){c.settingsAnimation=!1},buttonClicked:function(e){switch(c.settingsAnimation=!1,e){case 0:n.showSettingsModal();break;case 1:i(n.restart,r);break;case 2:o(n["new"]);break;case 3:n.undo();break;case 4:s(n.exit,r)}return!0}})}function r(){return u={restartConfirm:{title:t.instant("HOME.GAME.ACTION-SHEET.RESTART.CONFIRM.TITLE"),text:t.instant("HOME.GAME.ACTION-SHEET.RESTART.CONFIRM.TEXT")},newConfirm:{title:t.instant("HOME.GAME.ACTION-SHEET.NEW.CONFIRM.TITLE"),text:t.instant("HOME.GAME.ACTION-SHEET.NEW.CONFIRM.TEXT")},exitConfirm:{title:t.instant("HOME.GAME.ACTION-SHEET.EXIT.CONFIRM.TITLE"),text:t.instant("HOME.GAME.ACTION-SHEET.EXIT.CONFIRM.TEXT")}}}function i(e,n){function a(){var e={title:u.restartConfirm.title,template:u.restartConfirm.text,buttons:[{text:t.instant("HOME.GENERAL.CONFIRM.CANCEL")},{text:"<b>"+t.instant("HOME.GENERAL.CONFIRM.OK")+"</b>",type:"button-positive",onTap:function(e){return!0}}]};return e}n?e():c(a(),e)}function o(e){function n(){var n={title:u.newConfirm.title,template:u.newConfirm.text,cssClass:"three-btn",buttons:[{text:t.instant("HOME.GENERAL.CONFIRM.CANCEL")},{text:"<b>"+t.instant("HOME.GENERAL.CONFIRM.NO")+"</b>",type:"button-positive",onTap:function(t){return e(!0),!1}},{text:"<b>"+t.instant("HOME.GENERAL.CONFIRM.YES")+"</b>",type:"button-positive",onTap:function(t){return e(!1),!1}}]};return n}c(n(),e)}function s(e,n){function a(){var e={title:u.exitConfirm.title,template:u.exitConfirm.text,buttons:[{text:t.instant("HOME.GENERAL.CONFIRM.CANCEL")},{text:"<b>"+t.instant("HOME.GENERAL.CONFIRM.OK")+"</b>",type:"button-positive",onTap:function(e){return!0}}]};return e}n?e():c(a(),e)}function c(e,t){n.show(e).then(function(e){e&&t()})}var u=r(),l={showActionSheet:a,translateActionSheetData:r,showNewPopup:o,showExitPopup:s};return l}angular.module("molkkyscore").factory("gameActionSheetService",e),e.$inject=["$ionicActionSheet","$translate","$ionicPopup"]}(),function(){"use strict";function e(){function e(e,t){var n=_.findIndex(t,function(t){return e===t});return n}function t(e){var t=0;return e.forEach(function(e){e.finishedGame&&(t+=1)}),t}function n(e,t,n){var a="",r=t.score+e;return 0===e&&2===t.missesInARow?a="disqualified"===n.threeMisses?"error":"warning":r>n.winningScore?a="warning":r===n.winningScore&&(a="success"),a}function a(e){var t=e.length;return e.forEach(function(e){(e.finishedGame||e.disqualified)&&(t-=1)}),t<2}function r(e){return e[0].scoreHistory.length}function i(e,t){switch(t.threeMisses){case"to zero":e.score=0,e.missesInARow=0;break;case"halved":e.score=Math.floor(e.score/2),e.missesInARow=0;break;case"disqualified":e.disqualified=!0,e.score=0}return e}function o(e,t){switch(t.winningScoreExceeded){case"to zero":e.score=0;break;case"halved":e.score=Math.floor(e.score/2);break;case"half of winning score":e.score=Math.floor(t.winningScore/2)}return e}var s={getActivePlayerIndex:e,getEndPosition:t,getActivatedAvatarStatus:n,isGameEnded:a,isGameStarted:r,processThreeMisses:i,processWinningScoreExceeded:o};return s}angular.module("molkkyscore").factory("gameUtilities",e),e.$inject=[]}(),function(){"use strict";function e(e,t,n,a,r,i,o,s,c,u,l,f,d,p,E){function g(){m(),v(),h(),S(),T(),A(),y(),N(),i.getTutorial().showInvite&&V()}function m(){X.participants=i.initParticipants()}function v(){X.scoreboard=i.initScoreboard(X.scoreboard)}function S(){X.gameEnded=!1,W(),X.activePlayer=X.participants[0]}function h(){q=_.clone(s.getParameters().game),q.isCustom||s.assignDefaultGameParameters(q)}function T(){return u.initScoreDetailsModal(e).then(function(e){return X.scoreDetailsModal=e,X.scoreDetailsModal})}function A(){return U(),u.initGameRulesModal(e).then(function(e){return X.gameRulesModal=e,X.gameRulesModal})}function y(){function t(){X.scoreDetailsModal.hide(),m(),v(),S()}return u.getAddPlayersToGameModal(e,t).then(function(e){return z=e})}function M(e,t){if(!B(e)&&(0===t||1===t?X.activatedScore.value=X.activatedScore.value===t?W().value:t:X.activatedScore.singlePin&&X.activatedScore.value===t?X.activatedScore.singlePin=!1:X.activatedScore.value===t?(W(),X.activePlayer.activatedAvatarStatus=""):(X.activatedScore.value=t,X.activatedScore.singlePin=!0),X.activatedScore.value>-1)){var n=X.activatedScore.value,a=o.getActivatedAvatarStatus(n,X.activePlayer,q);X.activePlayer.activatedAvatarStatus=a}}function I(e){B(e)||X.activatedScore.value<0||(X.activePlayer.activatedAvatarStatus="",H(),o.isGameEnded(X.participants)?(X.gameEnded=!0,X.scoreDetailsModal.show()):k())}function O(){X.scoreListSortPredicate=X.isDetailsScoreListSorted?["-score","endPosition"]:""}function R(){return X.participants[0]?new Array(X.activePlayer.scoreHistory.length+1):[]}function w(e){B(e)||X.scoreDetailsModal.show()}function P(){l.showExitPopup(G,o.isGameEnded(X.participants))}function L(){l.showNewPopup($)}function N(){return K.showSettingsModal=b,K.restart=D,K["new"]=$,K.undo=x,K.exit=G,K}function C(e){if(!B(e)){var t=o.isGameStarted(X.participants),n=o.isGameEnded(X.participants);X.settingsAnimation=!0,l.showActionSheet(K,t,n,X)}}function b(){X.gameRulesModal.show()}function D(){o.isGameStarted(X.participants)&&(f.show("RESTARTING-GAME"),X.participants=i.initParticipants(),v(),S())}function $(e){e?z.show():(X.scoreDetailsModal.hide(),f.show("STARTING-NEW-GAME"),i.sortParticipantsOnScore(),X.participants=i.initParticipants(),v(),S())}function x(){if(o.isGameStarted(X.participants)){var e=o.getActivePlayerIndex(X.activePlayer,X.participants);F(X.activePlayer.scoreHistory.length+1,e),j(X.activePlayer),d.show(J.undoLast)}}function G(){n.go("tab.home")}function H(){(X.activatedScore.singlePin||1===X.activatedScore.value)&&c.updateStatistics("playerThrowsSinglePin",X.activePlayer,!1),X.activePlayer.scoreHistory.unshift(_.clone(X.activatedScore)),c.updateStatistics("playerThrow",X.activePlayer,!1),X.activePlayer.score+=X.activatedScore.value,X.activePlayer.missesInARow=X.activatedScore.value?0:X.activePlayer.missesInARow+1,W(),X.activePlayer.missesInARow>2?(o.processThreeMisses(X.activePlayer,q),d.show(X.activePlayer.firstName+" "+X.activePlayer.lastName+" "+J.threeMisses)):X.activePlayer.score>q.winningScore?(o.processWinningScoreExceeded(X.activePlayer,q),d.show(X.activePlayer.firstName+" "+X.activePlayer.lastName+" "+J.maxScoreExceeded)):X.activePlayer.score===q.winningScore&&(X.activePlayer.finishedGame=!0,X.activePlayer.endPosition=o.getEndPosition(X.participants),c.updateStatistics("playerReachedMaxScore",X.activePlayer,!1),1===X.activePlayer.endPosition&&(X.scoreDetailsModal.show(),d.show(X.activePlayer.firstName+" "+X.activePlayer.lastName+" "+J.winner),c.updateStatistics("playerWonGame",X.activePlayer,!1))),X.activePlayer.accumulatedScoreHistory.push(X.activePlayer.disqualified?"X":X.activePlayer.score)}function k(){var e=o.getActivePlayerIndex(X.activePlayer,X.participants),t=e>=X.participants.length-1;X.activePlayer=t?X.participants[0]:X.participants[e+1],(X.activePlayer.finishedGame||X.activePlayer.disqualified)&&k()}function F(e,t){var n=o.getActivePlayerIndex(X.activePlayer,X.participants),a=0===n;a?X.activePlayer=X.participants[X.participants.length-1]:X.activePlayer=X.participants[n-1],n=o.getActivePlayerIndex(X.activePlayer,X.participants);var r=t>n;r?e!==X.activePlayer.scoreHistory.length&&F(e,t):e!==X.activePlayer.scoreHistory.length+1&&F(e,t)}function j(e){Y(e);var t=e.accumulatedScoreHistory.length<2;W(),e.scoreHistory.shift(),e.accumulatedScoreHistory.pop(),e.score=t?0:e.accumulatedScoreHistory[e.accumulatedScoreHistory.length-1],e.missesInARow&&(e.missesInARow=e.missesInARow-1),e.finishedGame=!1,e.disqualified=!1,e.endPosition=-1,e.activatedAvatarStatus=""}function Y(e){c.updateStatistics("playerThrow",X.activePlayer,!0),e.scoreHistory[0].singlePin&&c.updateStatistics("playerThrowsSinglePin",X.activePlayer,!0),e.finishedGame&&c.updateStatistics("playerReachedMaxScore",X.activePlayer,!0),1===e.endPosition&&c.updateStatistics("playerWonGame",X.activePlayer,!0)}function W(){return X.activatedScore.value=-1,X.activatedScore.singlePin=!1,X.activatedScore}function U(){var e=s.getOptions().game,t=q.winningScoreExceeded,n=e.winningScoreExceeded.indexOf(t)+1,r=a.instant("HOME.SETTINGS.TABS.GAME.WINNING-SCORE-EXCEEDED.OPTION-"+n),i=e.threeMisses.indexOf(q.threeMisses)+1,o=a.instant("HOME.SETTINGS.TABS.GAME.THREE-MISSES.OPTION-"+i);X.gameRulesModalVariables.isCustom=q.isCustom,X.gameRulesModalVariables.winningScore=q.winningScore,X.gameRulesModalVariables.winningScoreExceeded=r,X.gameRulesModalVariables.threeMisses=o}function V(){X.tutorialTranslationId="HOME.TUTORIAL.INVITE-POPUP.TEXT",X.tutorialNeverAskAgain=!1;var t={title:a.instant("HOME.TUTORIAL.INVITE-POPUP.TITLE"),templateUrl:r+"/game/popup-tutorial.html",scope:e,buttons:[{text:a.instant("HOME.GENERAL.CONFIRM.NO")},{text:"<b>"+a.instant("HOME.GENERAL.CONFIRM.YES")+"</b>",type:"button-positive",onTap:function(e){return!0}}]};p.show(t).then(function(t){t&&E.startTutorial(e.$new(!0)),X.tutorialNeverAskAgain&&(i.getTutorial().showInvite=!1,i.updateTutorial())})}function B(e){if(E.isTutorialOngoing()&&(E.proceedTutorial(e),E.isPreventClickHandler()))return!0}var X=this,z={},q={},K={},J=d.getMessages().game;X.participants=[],X.scoreboard={},X.activatedScore={},X.activePlayer={},X.gameEnded=!1,X.gameRulesModal={},X.gameRulesModalVariables={},X.scoreDetailsModal={},X.scoreDetailsModalActiveTabIndex=0,X.isDetailsScoreListSorted=!1,X.scoreListSortPredicate="",X.toggleScoreListSortPredicate=O,X.activateScore=M,X.processThrow=I,X.getScoreboardDetailsRowIterator=R,X.showScoreDetailsModal=w,X.showActionSheet=C,X.showExitGamePopup=P,X.showNewGamePopup=L,g(),t.$on("$translateChangeSuccess",function(){l.translateActionSheetData(),J=d.getMessages().game}),e.$on("tutorial:finished",function(e){W(),e.stopPropagation()}),e.$on("$destroy",function(){z.remove(),X.scoreDetailsModal.remove()})}angular.module("molkkyscore").controller("GameCtrl",e),e.$inject=["$scope","$rootScope","$state","$translate","TEMPLATES_ROOT","gameService","gameUtilities","settingsService","statisticsService","modalsService","gameActionSheetService","loadingService","toast","$ionicPopup","tutorialService"]}(),function(){"use strict";function e(e,t){function n(e){u=e}function a(){return u}function r(){return u.forEach(function(e){e.score=0,e.scoreHistory=[],e.accumulatedScoreHistory=[],e.missesInARow=0,e.finishedGame=!1,e.disqualified=!1,e.endPosition=-1,e.activedAvatarStatus=""}),u}function i(){return u.sort(function(e,t){return e.score<t.score?1:e.score>t.score?-1:e.endPosition>t.endPosition?1:e.endPosition<t.endPosition?-1:0}),u}function o(e){switch(e.rowOne=u.slice(0,4),e.rowTwo=u.slice(4,8),u.length){case 2:e.colWidthPercentage=50;break;case 3:e.colWidthPercentage=33;break;default:e.colWidthPercentage=25}return e}function s(){return _.isEmpty(l)&&(l=t.getGameTutorial()),l}function c(){t.updateGameTutorial()}var u=[],l={},f={setParticipants:n,getParticipants:a,initParticipants:r,sortParticipantsOnScore:i,initScoreboard:o,getTutorial:s,updateTutorial:c};return f}angular.module("molkkyscore").factory("gameService",e),e.$inject=["playersService","dataService"]}(),function(){"use strict";function e(e,t,n,a){function r(){i()}function i(){function e(){n.go("game")}return a.getAddPlayersToGameModal(t,e).then(function(e){return s.addPlayersToGameModal=e,s.addPlayersToGameModal})}function o(){window.open("http://www.molkky.world","_system","location=yes")}var s=this;s.addPlayersToGameModal={},s.visitWebsite=o,r(),t.$on("appInitialized",function(){_.isEmpty(s.addPlayersToGameModal)||s.addPlayersToGameModal.remove(),i()}),t.$on("$destroy",function(){s.addPlayersToGameModal.remove()})}angular.module("molkkyscore").controller("HomeCtrl",e),e.$inject=["$rootScope","$scope","$state","modalsService"]}(),function(){"use strict";function e(e,t,n){function a(a){e.loadingMessage=a,n.show({templateUrl:t+"/loading/loading.html",noBackdrop:!0,duration:1e3})}function r(a){e.loadingMessage=a,n.show({templateUrl:t+"/loading/loading.html",noBackdrop:!0})}function i(){n.hide()}var o={show:a,showIndefinite:r,hide:i};return o}angular.module("molkkyscore").factory("loadingService",e),e.$inject=["$rootScope","TEMPLATES_ROOT","$ionicLoading"]}(),function(){"use strict";function e(e,t,n,a,r,i,o){function s(t,s){function c(){for(var e=y.viewModel.participants.length-1;e>=0;e--)E(e);y.viewModel.isTeamMode=!y.viewModel.isTeamMode}function u(e){if(8===y.viewModel.participants.length)return void i.show(f.maxParticipants);var t=_.findIndex(y.viewModel.playersInDatabase,function(t){return t.id===e.id}),n=y.viewModel.playersInDatabase.splice(t,1)[0];y.viewModel.participants.push(n)}function d(e){if(8===y.viewModel.participants.length)return void i.show(f.maxParticipants);var t=_.findIndex(y.viewModel.teamsInDatabase,function(t){return t.id===e.id}),n=y.viewModel.teamsInDatabase.splice(t,1)[0];y.viewModel.participants.push(n)}function p(){if(8===y.viewModel.participants.length)return void i.show(f.maxParticipants);var e={},t=h();e=y.viewModel.isTeamMode?{name:"Mr. "+T(t),tagline:"I'm a guest player",guestColor:t}:{firstName:"Mr.",lastName:T(t),tagline:"I'm a guest player",guestColor:t},y.viewModel.participants.push(e)}function E(e){var t=y.viewModel.participants.splice(e,1)[0];t.guestColor?y.viewModel.guestColors.push(t.guestColor):y.viewModel.isTeamMode?y.viewModel.isTeamMode&&y.viewModel.teamsInDatabase.push(t):y.viewModel.playersInDatabase.push(t)}function g(e,t,n){y.viewModel.participants.splice(t,1),y.viewModel.participants.splice(n,0,e)}function m(){A.hide()}function v(){a.setParticipants(y.viewModel.participants.slice()),o.show("STARTING-GAME"),A.hide().then(function(){s()})}function S(){y.viewModel.isTeamMode=!1,y.viewModel.showReorder=!1,y.viewModel.guestColors=l(),y.viewModel.playersInDatabase=r.all().slice(),y.viewModel.teamsInDatabase=r.allTeams().slice(),y.viewModel.participants=[]}function h(){var e=Math.floor(Math.random()*y.viewModel.guestColors.length);return y.viewModel.guestColors.splice(e,1)[0]}function T(e){return e.charAt(0).toUpperCase()+e.slice(1)}var A={},y=t.$new(!0),M=l();return y.$on("modal.hidden",function(){angular.element(document).find("body").removeClass("modal-open")}),n.fromTemplateUrl(e+"/modals/modal-start-players.html",{scope:y,animation:"slide-in-up"}).then(function(e){return A=e,y.viewModel={isTeamMode:!1,showReorder:!1,guestColors:M,playersInDatabase:r.all().slice(),teamsInDatabase:r.allTeams().slice(),participants:[],toggleTeamMode:c,addPlayerToParticipants:u,addTeamToParticipants:d,addGuestParticipant:p,removeFromParticipants:E,reorderParticipant:g,cancelAddPlayersToGame:m,startGame:v},y.$on("modal.hidden",function(){S()}),A})}function c(t){return t.$on("modal.hidden",function(){angular.element(document).find("body").removeClass("modal-open")}),n.fromTemplateUrl(e+"/game/modal-score-details.html",{scope:t,animation:"slide-in-up"})}function u(t){return t.$on("modal.hidden",function(){angular.element(document).find("body").removeClass("modal-open")}),n.fromTemplateUrl(e+"/game/modal-game-rules.html",{scope:t,animation:"slide-in-up"})}function l(){return["blonde","orange","pink","white","brown","blue","green","purple"]}var f=i.getMessages().start,d={getAddPlayersToGameModal:s,initScoreDetailsModal:c,initGameRulesModal:u};return t.$on("$translateChangeSuccess",function(){f=i.getMessages().start}),d}angular.module("molkkyscore").factory("modalsService",e),e.$inject=["TEMPLATES_ROOT","$rootScope","$ionicModal","gameService","playersService","toast","loadingService"]}(),function(){"use strict";function e(e,t,n,a,r,i,o,s,c,u,l){function f(){d(),p(),E()}function d(){var e=["versatility","winningRatio","accuracy","efficiency"],t={};return e.forEach(function(e){t=i.getMetricByKey(e),h.metricDonuts.push({translationId:t.translationId,value:h.player.statistics.metrics[e],unit:t.unit})}),h.metricDonuts}function p(){function e(e,t,n){var a={};return a.title=e,a.value=t,a.unit=n?n:"",a}var t=[e(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.FIRST-NAME"),h.player.firstName),e(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.LAST-NAME"),h.player.lastName),e(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.TAGLINE"),h.player.tagline)],n=[e(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.GAMES-PLAYED"),h.player.statistics.rawData.gamesPlayed),e(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.GAMES-WON"),h.player.statistics.rawData.gamesWon),e(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.GAMES-REACHED-MAX-SCORE"),h.player.statistics.rawData.gamesReachedMaxScore),e(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.THROWS"),h.player.statistics.rawData["throws"]),e(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.THROWS-SINGLE-PIN"),h.player.statistics.rawData.throwsSinglePin),e(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.THROWS-REACHED-MAX-SCORE"),h.player.statistics.rawData.throwsInGamesReachedMaxScore)];return h.profileData.profile=t,h.profileData.statistics=n,h.profileData}function E(){T.$on("modal.hidden",function(){angular.element(document).find("body").removeClass("modal-open")}),o.fromTemplateUrl(a+"/players/modal-edit-player.html",{scope:T,animation:"slide-in-up"}).then(function(e){h.editPlayerModal=e,T.viewModel={player:{},takePicture:m,removeAvatar:v,confirmPlayer:S}})}function g(e){T.viewModel.player=e,h.editPlayerModal.show()}function m(e){if(window.cordova){var t=e?Camera.PictureSourceType.PHOTOLIBRARY:Camera.PictureSourceType.CAMERA,n={quality:90,destinationType:Camera.DestinationType.DATA_URL,sourceType:t,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,targetWidth:150,targetHeight:150,saveToPhotoAlbum:!1,correctOrientation:!0};u.getPicture(n).then(function(e){T.viewModel.player.face="data:image/jpeg;base64,"+e},function(e){console.log(e.message)})}}function v(){var e={title:c.instant("HOME.PLAYERS.EDIT-PLAYER-MODAL.REMOVE-AVATAR-POPUP.TITLE"),template:c.instant("HOME.PLAYERS.EDIT-PLAYER-MODAL.REMOVE-AVATAR-POPUP.TEXT"),buttons:[{text:c.instant("HOME.GENERAL.CONFIRM.NO")},{text:"<b>"+c.instant("HOME.GENERAL.CONFIRM.YES")+"</b>",type:"button-positive",onTap:function(e){return!0}}]};s.confirm(e).then(function(e){e&&(T.viewModel.player.face="")})}function S(e){return T.viewModel.player.firstName&&T.viewModel.player.lastName?(T.viewModel.player.tagline||(T.viewModel.player.tagline="No tagline provided"),p(),r.updatePlayer(h.player),l.show(A.updateSaved),void h.editPlayerModal.hide()):void l.show(A.requiredFields)}var h=this,T=e.$new(!0),A=l.getMessages().players;h.player=r.get(n.playerId),h.editPlayerModal={},h.showPlayerModal=g,h.metricDonuts=[],h.profileData={},f(),t.$on("$translateChangeSuccess",function(){A=l.getMessages().players}),e.$on("$destroy",function(){h.editPlayerModal.remove()})}angular.module("molkkyscore").controller("PlayerDetailCtrl",e),e.$inject=["$scope","$rootScope","$stateParams","TEMPLATES_ROOT","playersService","statisticsService","$ionicModal","$ionicPopup","$translate","$cordovaCamera","toast"]}(),function(){"use strict";function e(e,t,n,a,r,i,o,s,c,u,l,f){function d(){p()}function p(){b.$on("modal.hidden",function(){angular.element(document).find("body").removeClass("modal-open")}),s.fromTemplateUrl(i+"/players/modal-add-player.html",{scope:b,animation:"slide-in-up"}).then(function(e){C.addPlayerModal=e,b.viewModel={player:{},takePicture:m,removeAvatar:v,cancelPlayer:S,confirmPlayer:h}})}function E(e){C.deleteMode=e,C.removeVisible=!C.removeVisible,C.removeVisible||M()}function g(){b.viewModel.player=P(),C.addPlayerModal.show()}function m(e){if(window.cordova){var t=e?Camera.PictureSourceType.PHOTOLIBRARY:Camera.PictureSourceType.CAMERA,n={quality:90,destinationType:Camera.DestinationType.DATA_URL,sourceType:t,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,targetWidth:150,targetHeight:150,saveToPhotoAlbum:!1,correctOrientation:!0};l.getPicture(n).then(function(e){b.viewModel.player.face="data:image/jpeg;base64,"+e},function(e){console.log(e.message)})}}function v(){var e={title:c.instant("HOME.PLAYERS.ADD-PLAYER-MODAL.REMOVE-AVATAR-POPUP.TITLE"),template:c.instant("HOME.PLAYERS.ADD-PLAYER-MODAL.REMOVE-AVATAR-POPUP.TEXT"),buttons:[{text:c.instant("HOME.GENERAL.CONFIRM.NO")},{text:"<b>"+c.instant("HOME.GENERAL.CONFIRM.YES")+"</b>",type:"button-positive",onTap:function(e){return!0}}]};o.confirm(e).then(function(e){e&&(b.viewModel.player.face="")})}function S(){b.viewModel.player={},C.addPlayerModal.hide()}function h(e){return b.viewModel.player.firstName&&b.viewModel.player.lastName?(L(b.viewModel.player),C.players.push(b.viewModel.player),u.clearCache(),r.addPlayer(b.viewModel.player),f.show(b.viewModel.player.firstName+" "+D.addPlayer),void C.addPlayerModal.hide()):void f.show(D.requiredFields)}function T(e){if("delete"===C.deleteMode){var t=_.flatten(_.pluck(C.teams,"players")),n=_.contains(t,e);n?(C.removeVisible=!1,A(e)):R(e)}else if("team"===C.deleteMode){var a=C.players.filter(function(e){return e.isSelected});a.length>3?f.show(D.maxTeam):e.isSelected=!e.isSelected}}function A(e){var t=C.teams.filter(function(t){return _.contains(t.players,e)}),n=_.pluck(t,"name"),a="",r="";n.length>1&&(r=" & "+n.pop()),a=n.join(", ")+r;var i="HOME.PLAYERS.REMOVE-TEAM-PLAYER_POPUP.TEXT",s={plural:t.length>1?"s":"",playerName:e.firstName+" "+e.lastName,
teamNames:a},u=o.alert({title:c.instant("HOME.PLAYERS.REMOVE-TEAM-PLAYER_POPUP.TITLE"),template:c.instant(i,s),okText:c.instant("HOME.GENERAL.CONFIRM.OK")});u.then(function(e){})}function y(){var e=C.teams.map(function(e){return e.name}).indexOf(C.teamName)>-1,t=C.players.filter(function(e){return e.isSelected});if(!t.length)return void f.show(D.zeroTeam);if(e)return void f.show(D.teamExists);var n={id:O(),name:C.teamName,players:t};a.initPlayerStatistics(n),C.teams.push(n),u.clearCache(),r.addTeam(n),f.show(n.name+" "+D.addTeam),M(),C.removeVisible=!1}function M(){C.players.map(function(e){delete e.isSelected}),C.teamName=""}function I(e){w(e)}function O(){return C.teams.length?_.max(C.teams,function(e){return e.id}).id+1:0}function R(e){var t="HOME.PLAYERS.REMOVE-POPUP.TEXT",a={playerName:e.firstName+" "+e.lastName};o.confirm({title:c.instant("HOME.PLAYERS.REMOVE-POPUP.TITLE"),template:c.instant(t,a),okText:c.instant("HOME.GENERAL.CONFIRM.YES"),cancelText:c.instant("HOME.GENERAL.CONFIRM.NO")}).then(function(t){t&&(n.remove(e),u.clearCache(),r.removePlayer(e),f.show(e.firstName+" "+D.removePlayer)),C.removeVisible=!1})}function w(e){var t="HOME.PLAYERS.REMOVE-TEAM-POPUP.TEXT",a={teamName:e.name};o.confirm({title:c.instant("HOME.PLAYERS.REMOVE-TEAM-POPUP.TITLE"),template:c.instant(t,a),okText:c.instant("HOME.GENERAL.CONFIRM.YES"),cancelText:c.instant("HOME.GENERAL.CONFIRM.NO")}).then(function(t){t&&(n.removeTeam(e),u.clearCache(),r.removeTeam(e),f.show(e.name+" "+D.removeTeam)),C.removeVisible=!1})}function P(){var e=N(),t={id:e,firstName:"",lastName:"",tagline:"",face:""};return t}function L(e){return e.tagline||(e.tagline="No tagline provided"),a.initPlayerStatistics(e),e}function N(){return C.players.length?_.max(C.players,function(e){return e.id}).id+1:0}var C=this,b=e.$new(!0),D=f.getMessages().players;C.players=n.all(),C.teams=n.allTeams(),C.removeVisible=!1,C.deleteMode="delete",C.initDeleteButton=E,C.onClickDeleteButton=T,C.submitTeam=y,C.teamName="",C.deleteTeam=I,C.addPlayerModal={},C.showPlayerModal=g,d(),t.$on("$translateChangeSuccess",function(){D=f.getMessages().players}),e.$on("$destroy",function(){C.addPlayerModal.remove()})}angular.module("molkkyscore").controller("PlayersCtrl",e),e.$inject=["$scope","$rootScope","playersService","statisticsService","dataService","TEMPLATES_ROOT","$ionicPopup","$ionicModal","$translate","$ionicHistory","$cordovaCamera","toast"]}(),function(){"use strict";function e(e){function t(){return _.isEmpty(c)&&(c=e.getAllPlayers()),c}function n(e){for(var t=0;t<c.length;t++)if(c[t].id===parseInt(e))return c[t];return null}function a(e){c.splice(c.indexOf(e),1)}function r(t){e.updatePlayerProfile(t)}function i(){return _.isEmpty(u)&&(u=e.getAllTeams()),u}function o(e){for(var t=0;t<u.length;t++)if(u[t].id===parseInt(e))return u[t];return null}function s(e){u.splice(u.indexOf(e),1)}var c=[],u=[],l={all:t,get:n,remove:a,updatePlayer:r,allTeams:i,getTeam:o,removeTeam:s};return l}angular.module("molkkyscore").factory("playersService",e),e.$inject=["dataService"]}(),function(){"use strict";function e(e,t,n,a,r,i,o){function s(){c(),u()}function c(){var e=["versatility","winningRatio","accuracy","efficiency"],t={};return e.forEach(function(e){t=i.getMetricByKey(e),l.metricDonuts.push({translationId:t.translationId,value:l.team.statistics.metrics[e],unit:t.unit})}),l.metricDonuts}function u(){function e(e,t,n){var a={};return a.title=e,a.value=t,a.unit=n?n:"",a}var t=[e(o.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.GAMES-PLAYED"),l.team.statistics.rawData.gamesPlayed),e(o.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.GAMES-WON"),l.team.statistics.rawData.gamesWon),e(o.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.GAMES-REACHED-MAX-SCORE"),l.team.statistics.rawData.gamesReachedMaxScore),e(o.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.THROWS"),l.team.statistics.rawData["throws"]),e(o.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.THROWS-SINGLE-PIN"),l.team.statistics.rawData.throwsSinglePin),e(o.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.THROWS-REACHED-MAX-SCORE"),l.team.statistics.rawData.throwsInGamesReachedMaxScore)];return l.profileData.statistics=t,l.profileData}var l=this;l.team=r.getTeam(n.teamId),l.metricDonuts=[],l.profileData={},s()}angular.module("molkkyscore").controller("TeamDetailCtrl",e),e.$inject=["$scope","$rootScope","$stateParams","TEMPLATES_ROOT","playersService","statisticsService","$translate"]}(),function(){"use strict";function e(e,t){function n(){function e(){return{rawData:{"throws":148,throwsSinglePin:126,throwsInGamesReachedMaxScore:89,gamesPlayed:64,gamesReachedMaxScore:51,gamesWon:41},metrics:{totalWins:41,versatility:78,winningRatio:86,accuracy:58,efficiency:74}}}j=[{id:0,firstName:"John",lastName:"Doe",tagline:"Look at my tagline",face:"img/dummy-man.jpg",statistics:e()},{id:1,firstName:"Jane",lastName:"Doe",tagline:"Hey, it's me!",face:"img/dummy-woman.jpg",statistics:e()},{id:2,firstName:"Adam",lastName:"McCarthy",tagline:"I should buy a boat",face:"img/perry.png",statistics:e()},{id:3,firstName:"Ben",lastName:"Dillon",tagline:"Molkky is fun!",face:"img/ben.png",statistics:e()}],Y=[{id:0,name:"De Bosklappers",players:[j[0],j[1],j[2]],statistics:e()},{id:1,name:"De Muppets",players:[j[0],j[1]],statistics:e()}],W={totalGamesPlayed:89},U={isCustom:!1,winningScore:50,winningScoreExceeded:"half of winning score",threeMisses:"disqualified"},V={language:"english"},B={showInvite:!0}}function a(){if(window.cordova)return F=e.openDB({name:"number-kubb-score.db",location:"default"}),L(F)}function r(){var t="SELECT * FROM PLAYERS";return e.execute(F,t).then(function(e){for(var t=0;t<e.rows.length;t++){var n=e.rows.item(t);j.push({id:n.ID,firstName:n.FIRSTNAME,lastName:n.LASTNAME,tagline:n.TAGLINE,face:n.FACE,statistics:{}})}return j})}function i(t){var n="SELECT * FROM TEAMS";return e.execute(F,n).then(function(e){for(var t=0;t<e.rows.length;t++){var n=e.rows.item(t),a=n.PLAYER_IDS.split("/").map(function(e){return a.filter(function(t){return t.id===e})[0]});Y.push({id:n.ID,name:n.NAME,players:a,statistics:{}})}return Y})}function o(n){var a={},r="SELECT * FROM STATISTICS_PLAYER_RAW_DATA WHERE PLAYER_ID="+n.id+" LIMIT 1",i="SELECT * FROM STATISTICS_PLAYER_METRICS WHERE PLAYER_ID="+n.id+" LIMIT 1";return t.all([e.execute(F,r),e.execute(F,i)]).then(function(e){return a.rawData={"throws":e[0].rows.item(0).THROWS,throwsSinglePin:e[0].rows.item(0).THROWS_SINGLE_PIN,throwsInGamesReachedMaxScore:e[0].rows.item(0).THROWS_IN_GAMES_REACHED_MAX_SCORE,gamesPlayed:e[0].rows.item(0).GAMES_PLAYED,gamesReachedMaxScore:e[0].rows.item(0).GAMES_REACHED_MAX_SCORE,gamesWon:e[0].rows.item(0).GAMES_WON},a.metrics={totalWins:e[1].rows.item(0).TOTAL_WINS,versatility:e[1].rows.item(0).VERSATILITY,winningRatio:e[1].rows.item(0).WINNING_RATIO,accuracy:e[1].rows.item(0).ACCURACY,efficiency:e[1].rows.item(0).EFFICIENCY},n.statistics=a,a})}function s(n){var a={},r="SELECT * FROM STATISTICS_TEAM_RAW_DATA WHERE TEAM_ID="+n.id+" LIMIT 1",i="SELECT * FROM STATISTICS_TEAM_METRICS WHERE TEAM_ID="+n.id+" LIMIT 1";return t.all([e.execute(F,r),e.execute(F,i)]).then(function(e){return a.rawData={"throws":e[0].rows.item(0).THROWS,throwsSinglePin:e[0].rows.item(0).THROWS_SINGLE_PIN,throwsInGamesReachedMaxScore:e[0].rows.item(0).THROWS_IN_GAMES_REACHED_MAX_SCORE,gamesPlayed:e[0].rows.item(0).GAMES_PLAYED,gamesReachedMaxScore:e[0].rows.item(0).GAMES_REACHED_MAX_SCORE,gamesWon:e[0].rows.item(0).GAMES_WON},a.metrics={totalWins:e[1].rows.item(0).TOTAL_WINS,versatility:e[1].rows.item(0).VERSATILITY,winningRatio:e[1].rows.item(0).WINNING_RATIO,accuracy:e[1].rows.item(0).ACCURACY,efficiency:e[1].rows.item(0).EFFICIENCY},n.statistics=a,a})}function c(){var t="SELECT * FROM STATISTICS_OVERALL_METRICS LIMIT 1";return e.execute(F,t).then(function(e){return e.rows.length?(W.totalGamesPlayed=e.rows.item(0).TOTAL_GAMES_PLAYED,W):void 0},function(e){console.error(e.message)})}function u(){var t="SELECT * FROM GAME_SETTINGS LIMIT 1";return e.execute(F,t).then(function(e){return e.rows.length?(U.isCustom=1===e.rows.item(0).IS_CUSTOM,U.winningScore=e.rows.item(0).WINNING_SCORE,U.winningScoreExceeded=e.rows.item(0).WINNING_SCORE_EXCEEDED,U.threeMisses=e.rows.item(0).THREE_MISSES,U):void 0},function(e){console.error(e.message)})}function l(){var t="SELECT * FROM APP_SETTINGS LIMIT 1";return e.execute(F,t).then(function(e){return e.rows.length?(V.language=e.rows.item(0).LANGUAGE,V):void 0},function(e){console.error(e.message)})}function f(){var t="SELECT * FROM GAME_TUTORIAL LIMIT 1";return e.execute(F,t).then(function(e){return e.rows.length?(B.showInvite=1===e.rows.item(0).SHOW_INVITE,B):void 0},function(e){console.error(e.message)})}function d(){return j}function p(){return Y}function E(){return W}function g(){return U}function m(){return{winningScore:50,winningScoreExceeded:"half of winning score",threeMisses:"disqualified"}}function v(){return V}function S(){return B}function h(e){window.cordova&&(N(e),C(e))}function T(){if(window.cordova){var t=W.totalGamesPlayed,n="UPDATE STATISTICS_OVERALL_METRICS SET TOTAL_GAMES_PLAYED="+t;e.execute(F,n).then(function(e){},function(e){console.error(e.message)})}}function A(){if(window.cordova){var t=U.isCustom?1:0,n=U.winningScore,a=U.winningScoreExceeded,r=U.threeMisses,i="UPDATE GAME_SETTINGS SET IS_CUSTOM="+t+", WINNING_SCORE="+n+', WINNING_SCORE_EXCEEDED="'+a+'", THREE_MISSES="'+r+'"';e.execute(F,i).then(function(e){},function(e){console.error(e.message)})}}function y(){if(window.cordova){var t=V.language,n='UPDATE APP_SETTINGS SET LANGUAGE="'+t+'"';e.execute(F,n).then(function(e){},function(e){console.error(e.message)})}}function M(){if(window.cordova){var t=B.showInvite?1:0,n='UPDATE GAME_TUTORIAL SET SHOW_INVITE="'+t+'"';e.execute(F,n).then(function(e){},function(e){console.error(e.message)})}}function I(t){if(window.cordova){var n='UPDATE PLAYERS SET FIRSTNAME="'+t.firstName+'", LASTNAME="'+t.lastName+'", TAGLINE="'+t.tagline+'", FACE="'+t.face+'" WHERE ID='+t.id;e.execute(F,n).then(function(e){},function(e){console.error(e.message)})}}function O(t){if(window.cordova){var n=[t.id,t.firstName,t.lastName,t.tagline,t.face],a="INSERT INTO PLAYERS (ID, FIRSTNAME, LASTNAME, TAGLINE, FACE) VALUES (?,?,?,?,?)";e.execute(F,a,n),b(t)}}function R(t){if(window.cordova){var n="DELETE FROM PLAYERS WHERE ID="+t.id,a="DELETE FROM STATISTICS_PLAYER_RAW_DATA WHERE PLAYER_ID="+t.id,r="DELETE FROM STATISTICS_PLAYER_METRICS WHERE PLAYER_ID="+t.id;e.execute(F,n),e.execute(F,a),e.execute(F,r)}}function w(t){if(window.cordova){var n=t.players.map(function(e){return e.id}).join("/"),a=[t.id,t.name,n],r="INSERT INTO TEAMS (ID, NAME, PLAYER_IDS) VALUES (?,?,?)";e.execute(F,r,a),D(t)}}function P(t){if(window.cordova){var n="DELETE FROM TEAMS WHERE ID="+t.id,a="DELETE FROM STATISTICS_TEAM_RAW_DATA WHERE TEAM_ID="+t.id,r="DELETE FROM STATISTICS_TEAM_METRICS WHERE TEAM_ID="+t.id;e.execute(F,n),e.execute(F,a),e.execute(F,r)}}function L(n){var a="CREATE TABLE IF NOT EXISTS PLAYERS (ID integer, FIRSTNAME text, LASTNAME text, TAGLINE text, FACE text)",r="CREATE TABLE IF NOT EXISTS TEAMS (ID integer, NAME text, PLAYER_IDS text)",i="CREATE TABLE IF NOT EXISTS STATISTICS_PLAYER_RAW_DATA (PLAYER_ID integer, THROWS integer, THROWS_SINGLE_PIN integer, THROWS_IN_GAMES_REACHED_MAX_SCORE integer, GAMES_PLAYED integer, GAMES_REACHED_MAX_SCORE integer, GAMES_WON integer)",o="CREATE TABLE IF NOT EXISTS STATISTICS_PLAYER_METRICS (PLAYER_ID integer, TOTAL_WINS integer, VERSATILITY decimal(5,4), WINNING_RATIO decimal(5,4), ACCURACY decimal(5,4), EFFICIENCY decimal(5,4))",s="CREATE TABLE IF NOT EXISTS STATISTICS_TEAM_RAW_DATA (TEAM_ID integer, THROWS integer, THROWS_SINGLE_PIN integer, THROWS_IN_GAMES_REACHED_MAX_SCORE integer, GAMES_PLAYED integer, GAMES_REACHED_MAX_SCORE integer, GAMES_WON integer)",u="CREATE TABLE IF NOT EXISTS STATISTICS_TEAM_METRICS (TEAM_ID integer, TOTAL_WINS integer, VERSATILITY decimal(5,4), WINNING_RATIO decimal(5,4), ACCURACY decimal(5,4), EFFICIENCY decimal(5,4))",l="CREATE TABLE IF NOT EXISTS STATISTICS_OVERALL_METRICS (TOTAL_GAMES_PLAYED integer)",f="CREATE TABLE IF NOT EXISTS GAME_SETTINGS (IS_CUSTOM tinyint(1), WINNING_SCORE integer, WINNING_SCORE_EXCEEDED text, THREE_MISSES text)",d="CREATE TABLE IF NOT EXISTS APP_SETTINGS (LANGUAGE text)",p="CREATE TABLE IF NOT EXISTS GAME_TUTORIAL (SHOW_INVITE tinyint(1))";return t.all([e.execute(n,a),e.execute(n,r),e.execute(n,i),e.execute(n,o),e.execute(n,s),e.execute(n,u),e.execute(n,l),e.execute(n,f),e.execute(n,d),e.execute(n,p)]).then(function(e){return c().then(function(e){if(!e)return t.all([_(),$(),x(),G(),H()])})})}function N(t){var n=t.statistics.rawData,a="UPDATE STATISTICS_PLAYER_RAW_DATA SET THROWS="+n["throws"]+", THROWS_SINGLE_PIN="+n.throwsSinglePin+", THROWS_IN_GAMES_REACHED_MAX_SCORE="+n.throwsInGamesReachedMaxScore+", GAMES_PLAYED="+n.gamesPlayed+", GAMES_REACHED_MAX_SCORE="+n.gamesReachedMaxScore+", GAMES_WON="+n.gamesWon+" WHERE PLAYER_ID="+t.id;e.execute(F,a).then(function(e){},function(e){console.error(e.message)})}function C(t){var n=t.statistics.metrics,a="UPDATE STATISTICS_PLAYER_METRICS SET TOTAL_WINS="+n.totalWins+", VERSATILITY="+n.versatility+", WINNING_RATIO="+n.winningRatio+", ACCURACY="+n.accuracy+", EFFICIENCY="+n.efficiency+" WHERE PLAYER_ID="+t.id;e.execute(F,a).then(function(e){},function(e){console.error(e.message)})}function _(){var n=["1","John","Doe","Look at my tagline","img/dummy-man.jpg"],a=["2","Jane","Doe","Hey, it's me!","img/dummy-woman.jpg"],r="INSERT INTO PLAYERS (ID, FIRSTNAME, LASTNAME, TAGLINE, FACE) VALUES (?,?,?,?,?)";return t.all([e.execute(F,r,n),e.execute(F,r,a)]).then(function(e){return k().then(function(e){var n=[];return e.forEach(function(e){n.push(b(e))}),t.all(n)})})}function b(n){var a="INSERT INTO STATISTICS_PLAYER_RAW_DATA (PLAYER_ID, THROWS, THROWS_SINGLE_PIN, THROWS_IN_GAMES_REACHED_MAX_SCORE, GAMES_PLAYED, GAMES_REACHED_MAX_SCORE, GAMES_WON) VALUES (?,?,?,?,?,?,?)",r="INSERT INTO STATISTICS_PLAYER_METRICS (PLAYER_ID, TOTAL_WINS, VERSATILITY, WINNING_RATIO, ACCURACY, EFFICIENCY) VALUES (?,?,?,?,?,?)";return t.all([e.execute(F,a,[n.id,0,0,0,0,0,0]),e.execute(F,r,[n.id,0,0,0,0,0])])}function D(n){var a="INSERT INTO STATISTICS_TEAM_RAW_DATA (TEAM_ID, THROWS, THROWS_SINGLE_PIN, THROWS_IN_GAMES_REACHED_MAX_SCORE, GAMES_PLAYED, GAMES_REACHED_MAX_SCORE, GAMES_WON) VALUES (?,?,?,?,?,?,?)",r="INSERT INTO STATISTICS_TEAM_METRICS (TEAM_ID, TOTAL_WINS, VERSATILITY, WINNING_RATIO, ACCURACY, EFFICIENCY) VALUES (?,?,?,?,?,?)";return t.all([e.execute(F,a,[n.id,0,0,0,0,0,0]),e.execute(F,r,[n.id,0,0,0,0,0])])}function $(){var t="INSERT INTO STATISTICS_OVERALL_METRICS (TOTAL_GAMES_PLAYED) VALUES (?)";return e.execute(F,t,[0])}function x(){var t=m(),n=t.winningScore,a=t.winningScoreExceeded,r=t.threeMisses,i=[0,n,a,r],o="INSERT INTO GAME_SETTINGS (IS_CUSTOM, WINNING_SCORE, WINNING_SCORE_EXCEEDED, THREE_MISSES) VALUES (?,?,?,?)";return e.execute(F,o,i)}function G(){var t=["english"],n="INSERT INTO APP_SETTINGS (LANGUAGE) VALUES (?)";return e.execute(F,n,t)}function H(){var t=[1],n="INSERT INTO GAME_TUTORIAL (SHOW_INVITE) VALUES (?)";return e.execute(F,n,t)}function k(){var t=[],n="SELECT * FROM PLAYERS";return e.execute(F,n).then(function(e){for(var n=0;n<e.rows.length;n++){var a=e.rows.item(n);t.push({id:a.ID,firstName:a.FIRSTNAME,lastName:a.LASTNAME,tagline:a.TAGLINE,face:a.FACE,statistics:{}})}return t})}var F={},j=[],Y=[],W={},U={},V={},B={},X={initBrowserDev:n,initDatabase:a,initPlayers:r,initTeams:i,initPlayerStatistics:o,initTeamStatistics:s,initOverallStatistics:c,initGameSettings:u,initAppSettings:l,initGameTutorial:f,getAllPlayers:d,getAllTeams:p,getOverallStatistics:E,getGameSettings:g,getDefaultGameSettings:m,getAppSettings:v,getGameTutorial:S,updatePlayerStatistics:h,updateOverallStatistics:T,updateGameSettings:A,updateAppSettings:y,updateGameTutorial:M,updatePlayerProfile:I,addPlayer:O,removePlayer:R,addTeam:w,removeTeam:P};return X}angular.module("molkkyscore").factory("dataService",e),e.$inject=["$cordovaSQLite","$q"]}(),function(){"use strict";function e(e,t,n,a,r,i){function o(){}function s(){var e=n.alert({title:a.instant("HOME.SETTINGS.TABS.GAME.CUSTOM-TOGGLE.POPUP.TITLE"),template:a.instant("HOME.SETTINGS.TABS.GAME.CUSTOM-TOGGLE.POPUP.TEXT"),okText:a.instant("HOME.GENERAL.CONFIRM.OK")});e.then(function(e){})}function c(e,t){var n="",a=_.omit(e.app,u(t.app)),i=_.omit(e.game,u(t.game));_.isEmpty(a)||(n=Object.keys(a)[0],r.updateAppParameter(n,l.parameters.app[n])),_.isEmpty(i)||r.updateGameParameter()}function u(e){return function(t,n){return e[n]===t}}var l=this,f=i.getMessages().settings;l.activeTabIndex=0,l.options=r.getOptions(),l.parameters=r.getParameters(),o(),t.$on("$translateChangeSuccess",function(){f=i.getMessages().settings}),e.$watch(function(){return l.parameters.game.isCustom},function(e,t){e!==t&&e&&s()}),e.$watch(function(){return l.parameters},function(e,t){_.isEqual(e,t)||(c(e,t),i.show(f.update))},!0)}angular.module("molkkyscore").controller("SettingsCtrl",e),e.$inject=["$scope","$rootScope","$ionicPopup","$translate","settingsService","toast"]}(),function(){"use strict";function e(e,t){function n(){return{app:{language:[{value:"English",key:"english"},{value:"Français",key:"french"}]},game:{winningScore:[25,50,100],winningScoreExceeded:["to zero","halved","half of winning score"],threeMisses:["to zero","halved","disqualified"]}}}function a(){return _.isEmpty(s)&&(s.app=t.getAppSettings(),s.game=t.getGameSettings()),s}function r(n,a){switch(s.app[n]=a,n){case"language":e.use(a)}t.updateAppSettings()}function i(){t.updateGameSettings()}function o(e){_.extendOwn(e,t.getDefaultGameSettings())}var s={},c={getOptions:n,getParameters:a,updateGameParameter:i,updateAppParameter:r,assignDefaultGameParameters:o};return c}angular.module("molkkyscore").factory("settingsService",e),e.$inject=["$translate","dataService"]}(),function(){"use strict";function e(e,t,n){function a(){}function r(e){return!i.metric.unit||e.statistics.rawData.gamesPlayed>=5}var i=this;i.metric=t.getMetric(parseInt(e.metricId,10)),i.players=n.all(),i.minGamesFilter=r,a()}angular.module("molkkyscore").controller("StatisticsListingCtrl",e),e.$inject=["$stateParams","statisticsService","playersService"]}(),function(){"use strict";function e(e,t,n){function a(e,t,a){var c=t.scoreHistory.length;switch(e){case"playerWonGame":r(t,n.getOverallStatistics(),a);break;case"playerReachedMaxScore":i(t,c,a);break;case"playerThrowsSinglePin":o(t,a);break;case"playerThrow":s(t,c,a)}t.guestColor||n.updatePlayerStatistics(t)}function r(t,a,r){var i=e.getParticipants(),o=r?-1:1;n.getOverallStatistics().totalGamesPlayed+=o,n.updateOverallStatistics(),t.guestColor||(t.statistics.rawData.gamesWon+=o,c("totalWins",t)),i.forEach(function(e){e.statistics&&(e.statistics.rawData.gamesPlayed+=o)}),c("winningRatio",i)}function i(e,t,n){if(!e.guestColor){var a=n?-1:1;e.statistics.rawData.gamesReachedMaxScore+=a,e.statistics.rawData.throwsInGamesReachedMaxScore+=t*a,c("efficiency",e)}}function o(e,t){if(!e.guestColor){var n=t?-1:1;e.statistics.rawData.throwsSinglePin+=n}}function s(e,t,n){if(!e.guestColor){var a=n?-1:1;e.statistics.rawData["throws"]+=a,c("accuracy",e)}}function c(e,t){switch(e){case"totalWins":u(t);break;case"winningRatio":f(t);break;case"versatility":l(t);break;case"accuracy":d(t);break;case"efficiency":p(t)}}function u(e){var t=e.statistics.rawData.gamesWon;e.statistics.metrics.totalWins=t}function l(e){var t=e.statistics.metrics.accuracy,n=e.statistics.metrics.efficiency,a=e.statistics.metrics.winningRatio;e.statistics.metrics.versatility=Math.round((t+n+a)/3)}function f(e){var t,n;e.forEach(function(e){e.statistics&&(t=e.statistics.rawData.gamesWon,n=e.statistics.rawData.gamesPlayed,e.statistics.metrics.winningRatio=Math.round(t/n*100),c("versatility",e))})}function d(e){var t=e.statistics.rawData.throwsSinglePin,n=e.statistics.rawData["throws"];e.statistics.metrics.accuracy=Math.round(t/n*100),c("versatility",e)}function p(e){var t=E(),n=e.statistics.rawData.throwsInGamesReachedMaxScore,a=e.statistics.rawData.gamesReachedMaxScore,r=n/a;e.statistics.metrics.efficiency=Math.round(t/r*100),c("versatility",e)}function E(){var e=0,n=t.getParameters().game.winningScore;switch(n){case 25:e=3;break;case 50:e=5;break;case 100:e=9}return e}var g={update:a};return g}angular.module("molkkyscore").factory("statisticsProcessor",e),e.$inject=["gameService","settingsService","dataService"]}(),function(){"use strict";function e(e,t,n,a,r,i){function o(){s(),c()}function s(){i.fromTemplateUrl(a+"/statistics/modal-statistics-info.html",{scope:f,animation:"slide-in-up"}).then(function(e){l.statisticsInfoModal=e,f.viewModel={modal:l.statisticsInfoModal}})}function c(){d.$on("popover.hidden",function(){angular.element(document).find("body").removeClass("popover-open")}),r.fromTemplateUrl(a+"/statistics/popover-statistics-item-info.html",{scope:d}).then(function(e){l.statsItemsInfoPopover=e}),d.viewModel={metric:{}}}function u(e,t){d.viewModel.metric=t,l.statsItemsInfoPopover.show(e),e.stopPropagation(),e.preventDefault()}var l=this,f=e.$new(!0),d=e.$new(!0);l.metrics=t.getMetrics(),l.overallStatistics=t.getOverallStatistics(),l.gameSettings=n.getParameters().game,l.statisticsInfoModal={},l.statsItemsInfoPopover={},l.showItemInfo=u,o()}angular.module("molkkyscore").controller("StatisticsCtrl",e),e.$inject=["$scope","statisticsService","settingsService","TEMPLATES_ROOT","$ionicPopover","$ionicModal"]}(),function(){"use strict";function e(e,t,n,a,r){function i(){return d}function o(e){return _.findWhere(d,{id:e})}function s(e){return _.findWhere(d,{keyName:e})}function c(){return _.isEmpty(p)&&(p=t.getOverallStatistics()),p}function u(e){return e.statistics={rawData:{"throws":0,throwsSinglePin:0,throwsInGamesReachedMaxScore:0,gamesPlayed:0,gamesReachedMaxScore:0,gamesWon:0},metrics:{}},i().forEach(function(t){"players"===t.category&&(e.statistics.metrics[t.keyName]=0)}),e}function l(e,t,n){r.getParameters().game.isCustom||a.update(e,t,n)}function f(e,t,n,a,r){return{id:e,keyName:t,category:n,translationId:a,unit:r}}var d=[f(0,"totalGamesPlayed","overall","OVERALL.TOTAL-GAMES-PLAYED",""),f(1,"totalWins","players","PLAYERS.TOTAL-WINS",""),f(3,"versatility","players","PLAYERS.VERSATILITY","%"),f(2,"winningRatio","players","PLAYERS.WINNING-RATIO","%"),f(4,"accuracy","players","PLAYERS.ACCURACY","%"),f(5,"efficiency","players","PLAYERS.EFFICIENCY","%")],p={},E={getMetrics:i,getMetric:o,getMetricByKey:s,getOverallStatistics:c,initPlayerStatistics:u,updateStatistics:l};return E}angular.module("molkkyscore").factory("statisticsService",e),e.$inject=["$translate","dataService","gameService","statisticsProcessor","settingsService"]}(),function(){"use strict";function e(e,t){function n(t){window.cordova&&e.showWithOptions({message:t,duration:"short",position:"top",styling:{cornerRadius:4}})}function a(){return{start:{maxParticipants:t.instant("HOME.START.TOASTS.MAX-PARTICIPANTS")},game:{undoLast:t.instant("HOME.GAME.TOASTS.UNDO-LAST"),threeMisses:t.instant("HOME.GAME.TOASTS.THREE-MISSES"),maxScoreExceeded:t.instant("HOME.GAME.TOASTS.MAX-SCORE-EXCEEDED"),winner:t.instant("HOME.GAME.TOASTS.WINNER")},players:{addPlayer:t.instant("HOME.PLAYERS.TOASTS.ADD-PLAYER"),removePlayer:t.instant("HOME.PLAYERS.TOASTS.REMOVE-PLAYER"),addTeam:t.instant("HOME.PLAYERS.TOASTS.ADD-TEAM"),removeTeam:t.instant("HOME.PLAYERS.TOASTS.REMOVE-TEAM"),requiredFields:t.instant("HOME.PLAYERS.TOASTS.REQUIRED-FIELDS"),updateSaved:t.instant("HOME.PLAYERS.TOASTS.UPDATE-SAVED"),zeroTeam:t.instant("HOME.PLAYERS.TOASTS.ZERO-TEAM"),teamExists:t.instant("HOME.PLAYERS.TOASTS.TEAM-EXISTS"),maxTeam:t.instant("HOME.PLAYERS.TOASTS.MAX-TEAM")},settings:{update:t.instant("HOME.SETTINGS.TOASTS.UPDATE")}}}var r={show:n,getMessages:a};return r}angular.module("molkkyscore").factory("toast",e),e.$inject=["$cordovaToast","$translate"]}(),function(){"use strict";function e(e,t,n,a){function r(e){function r(e){return e>f?(l.$emit("tutorial:finished"),void u.remove()):void a(function(){c(e).triggerHandler("click")})}l=e,n.fromTemplateUrl(t+"/tutorial/popover.html",{scope:l,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(e){u=e,r(1)}),l.viewModel={progressStep:0,progressSteps:f,triggerProceed:r}}function i(e){switch(l.viewModel.progressStep=l.viewModel.progressStep+1,l.viewModel.progressStep){case 2:p=!1;break;case 3:p=!0;break;case 4:p=!0;break;case 5:p=!0}return u.hide().then(function(){l.viewModel.titleTranslationId="HOME.TUTORIAL.INFO-POPOVER.STEP-"+l.viewModel.progressStep+".TITLE",l.viewModel.textTranslationId="HOME.TUTORIAL.INFO-POPOVER.STEP-"+l.viewModel.progressStep+".TEXT",u.show(e)})}function o(){return p}function s(){return!(!u||_.isEmpty(u))&&(d=l.viewModel.progressStep<f)}function c(e){var t="";switch(e){case 1:t="score-12";break;case 2:t="score-12";break;case 3:t="player-cell";break;case 4:t="scoreboard";break;case 5:t="settings"}return angular.element(document.getElementById(t))}var u={},l={},f=5,d=!1,p=!1,E={startTutorial:r,proceedTutorial:i,isPreventClickHandler:o,isTutorialOngoing:s};return E}angular.module("molkkyscore").factory("tutorialService",e),e.$inject=["dataService","TEMPLATES_ROOT","$ionicPopover","$timeout"]}();