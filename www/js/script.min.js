!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e()}):"object"==typeof exports?module.exports=e():e()}(this,function(){function t(t){"use strict";var e=t.storageKey(),n=t.storage(),r=function(){var r=t.preferredLanguage();angular.isString(r)?t.use(r):n.put(e,t.use())};r.displayName="fallbackFromIncorrectStorageValue",n?n.get(e)?t.use(n.get(e))["catch"](r):r():angular.isString(t.preferredLanguage())&&t.use(t.preferredLanguage())}function e(){"use strict";var t,e,n=null,r=!1,a=!1;e={sanitize:function(t,e){return"text"===e&&(t=o(t)),t},escape:function(t,e){return"text"===e&&(t=i(t)),t},sanitizeParameters:function(t,e){return"params"===e&&(t=s(t,o)),t},escapeParameters:function(t,e){return"params"===e&&(t=s(t,i)),t}},e.escaped=e.escapeParameters,this.addStrategy=function(t,n){return e[t]=n,this},this.removeStrategy=function(t){return delete e[t],this},this.useStrategy=function(t){return r=!0,n=t,this},this.$get=["$injector","$log",function(i,o){var s={},c=function(t,n,r){return angular.forEach(r,function(r){if(angular.isFunction(r))t=r(t,n);else if(angular.isFunction(e[r]))t=e[r](t,n);else{if(!angular.isString(e[r]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+r+"'");if(!s[e[r]])try{s[e[r]]=i.get(e[r])}catch(a){throw s[e[r]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+r+"'")}t=s[e[r]](t,n)}}),t},u=function(){r||a||(o.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),a=!0)};return i.has("$sanitize")&&(t=i.get("$sanitize")),{useStrategy:function(t){return function(e){t.useStrategy(e)}}(this),sanitize:function(t,e,r){if(n||u(),arguments.length<3&&(r=n),!r)return t;var a=angular.isArray(r)?r:[r];return c(t,e,a)}}}];var i=function(t){var e=angular.element("<div></div>");return e.text(t),e.html()},o=function(e){if(!t)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return t(e)},s=function(t,e,n){if(angular.isObject(t)){var r=angular.isArray(t)?[]:{};if(n){if(n.indexOf(t)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else n=[];return n.push(t),angular.forEach(t,function(t,a){angular.isFunction(t)||(r[a]=s(t,e,n))}),n.splice(-1,1),r}return angular.isNumber(t)?t:e(t)}}function n(t,e,n,r){"use strict";var a,i,o,s,c,u,l,f,d,p,g,v,h,m,E,S,y={},T=[],A=t,w=[],P="translate-cloak",M=!1,I=!1,O=".",R=!1,N=!1,L=0,C=!0,b="default",$={"default":function(t){return(t||"").split("-").join("_")},java:function(t){var e=(t||"").split("-").join("_"),n=e.split("_");return n.length>1?n[0].toLowerCase()+"_"+n[1].toUpperCase():e},bcp47:function(t){var e=(t||"").split("_").join("-"),n=e.split("-");return n.length>1?n[0].toLowerCase()+"-"+n[1].toUpperCase():e},"iso639-1":function(t){var e=(t||"").split("_").join("-"),n=e.split("-");return n[0].toLowerCase()}},_="2.11.1",x=function(){if(angular.isFunction(r.getLocale))return r.getLocale();var t,n,a=e.$get().navigator,i=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(a.languages))for(t=0;t<a.languages.length;t++)if(n=a.languages[t],n&&n.length)return n;for(t=0;t<i.length;t++)if(n=a[i[t]],n&&n.length)return n;return null};x.displayName="angular-translate/service: getFirstBrowserLanguage";var G=function(){var t=x()||"";return $[b]&&(t=$[b](t)),t};G.displayName="angular-translate/service: getLocale";var D=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},k=function(){return this.toString().replace(/^\s+|\s+$/g,"")},H=function(t){if(t){for(var e=[],n=angular.lowercase(t),r=0,a=T.length;r<a;r++)e.push(angular.lowercase(T[r]));if(D(e,n)>-1)return t;if(i){var o;for(var s in i)if(i.hasOwnProperty(s)){var c=!1,u=Object.prototype.hasOwnProperty.call(i,s)&&angular.lowercase(s)===angular.lowercase(t);if("*"===s.slice(-1)&&(c=s.slice(0,-1)===t.slice(0,s.length-1)),(u||c)&&(o=i[s],D(e,angular.lowercase(o))>-1))return o}}var l=t.split("_");return l.length>1&&D(e,angular.lowercase(l[0]))>-1?l[0]:void 0}},j=function(t,e){if(!t&&!e)return y;if(t&&!e){if(angular.isString(t))return y[t]}else angular.isObject(y[t])||(y[t]={}),angular.extend(y[t],F(e));return this};this.translations=j,this.cloakClassName=function(t){return t?(P=t,this):P},this.nestedObjectDelimeter=function(t){return t?(O=t,this):O};var F=function(t,e,n,r){var a,i,o,s;e||(e=[]),n||(n={});for(a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s=t[a],angular.isObject(s)?F(s,e.concat(a),n,a):(i=e.length?""+e.join(O)+O+a:a,e.length&&a===r&&(o=""+e.join(O),n[o]="@:"+i),n[i]=s));return n};F.displayName="flatObject",this.addInterpolation=function(t){return w.push(t),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(t){return p=t,this},this.useSanitizeValueStrategy=function(t){return n.useStrategy(t),this},this.preferredLanguage=function(t){return t?(U(t),this):a};var U=function(t){return t&&(a=t),a};this.translationNotFoundIndicator=function(t){return this.translationNotFoundIndicatorLeft(t),this.translationNotFoundIndicatorRight(t),this},this.translationNotFoundIndicatorLeft=function(t){return t?(h=t,this):h},this.translationNotFoundIndicatorRight=function(t){return t?(m=t,this):m},this.fallbackLanguage=function(t){return Y(t),this};var Y=function(t){return t?(angular.isString(t)?(s=!0,o=[t]):angular.isArray(t)&&(s=!1,o=t),angular.isString(a)&&D(o,a)<0&&o.push(a),this):s?o[0]:o};this.use=function(t){if(t){if(!y[t]&&!g)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'");return c=t,this}return c},this.resolveClientLocale=function(){return G()};var W=function(t){return t?(A=t,this):f?f+A:A};this.storageKey=W,this.useUrlLoader=function(t,e){return this.useLoader("$translateUrlLoader",angular.extend({url:t},e))},this.useStaticFilesLoader=function(t){return this.useLoader("$translateStaticFilesLoader",t)},this.useLoader=function(t,e){return g=t,v=e||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(t){return l=t,this},this.storagePrefix=function(t){return t?(f=t,this):t},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(t){return d=t,this},this.usePostCompiling=function(t){return M=!!t,this},this.forceAsyncReload=function(t){return I=!!t,this},this.uniformLanguageTag=function(t){return t?angular.isString(t)&&(t={standard:t}):t={},b=t.standard,this},this.determinePreferredLanguage=function(t){var e=t&&angular.isFunction(t)?t():G();return a=T.length?H(e)||e:e,this},this.registerAvailableLanguageKeys=function(t,e){return t?(T=t,e&&(i=e),this):T},this.useLoaderCache=function(t){return t===!1?E=void 0:t===!0?E=!0:"undefined"==typeof t?E="$translationCache":t&&(E=t),this},this.directivePriority=function(t){return void 0===t?L:(L=t,this)},this.statefulFilter=function(t){return void 0===t?C:(C=t,this)},this.postProcess=function(t){return S=t?t:void 0,this},this.keepContent=function(t){return N=!!t,this},this.$get=["$log","$injector","$rootScope","$q",function(t,e,n,r){var i,f,b,$=e.get(p||"$translateDefaultInterpolation"),x=!1,V={},B={},X=function(t,e,n,s,u){!c&&a&&(c=a);var d=u&&u!==c?H(u)||u:c;if(u&&lt(u),angular.isArray(t)){var p=function(t){for(var a={},i=[],o=function(t){var i=r.defer(),o=function(e){a[t]=e,i.resolve([t,e])};return X(t,e,n,s,u).then(o,o),i.promise},c=0,l=t.length;c<l;c++)i.push(o(t[c]));return r.all(i).then(function(){return a})};return p(t)}var g=r.defer();t&&(t=k.apply(t));var v=function(){var t=a?B[a]:B[d];if(f=0,l&&!t){var e=i.get(A);if(t=B[e],o&&o.length){var n=D(o,e);f=0===n?1:0,D(o,a)<0&&o.push(a)}}return t}();if(v){var h=function(){u||(d=c),ot(t,e,n,s,d).then(g.resolve,g.reject)};h.displayName="promiseResolved",v["finally"](h)}else ot(t,e,n,s,d).then(g.resolve,g.reject);return g.promise},z=function(t){return h&&(t=[h,t].join(" ")),m&&(t=[t,m].join(" ")),t},q=function(t){c=t,l&&i.put(X.storageKey(),c),n.$emit("$translateChangeSuccess",{language:t}),$.setLocale(c);var e=function(t,e){V[e].setLocale(c)};e.displayName="eachInterpolatorLocaleSetter",angular.forEach(V,e),n.$emit("$translateChangeEnd",{language:t})},K=function(t){if(!t)throw"No language key specified for loading.";var a=r.defer();n.$emit("$translateLoadingStart",{language:t}),x=!0;var i=E;"string"==typeof i&&(i=e.get(i));var o=angular.extend({},v,{key:t,$http:angular.extend({},{cache:i},v.$http)}),s=function(e){var r={};n.$emit("$translateLoadingSuccess",{language:t}),angular.isArray(e)?angular.forEach(e,function(t){angular.extend(r,F(t))}):angular.extend(r,F(e)),x=!1,a.resolve({key:t,table:r}),n.$emit("$translateLoadingEnd",{language:t})};s.displayName="onLoaderSuccess";var c=function(t){n.$emit("$translateLoadingError",{language:t}),a.reject(t),n.$emit("$translateLoadingEnd",{language:t})};return c.displayName="onLoaderError",e.get(g)(o).then(s,c),a.promise};if(l&&(i=e.get(l),!i.get||!i.put))throw new Error("Couldn't use storage '"+l+"', missing get() or put() method!");if(w.length){var J=function(t){var n=e.get(t);n.setLocale(a||c),V[n.getInterpolationIdentifier()]=n};J.displayName="interpolationFactoryAdder",angular.forEach(w,J)}var Q=function(t){var e=r.defer();if(Object.prototype.hasOwnProperty.call(y,t))e.resolve(y[t]);else if(B[t]){var n=function(t){j(t.key,t.table),e.resolve(t.table)};n.displayName="translationTableResolver",B[t].then(n,e.reject)}else e.reject();return e.promise},Z=function(t,e,n,a){var i=r.defer(),o=function(r){if(Object.prototype.hasOwnProperty.call(r,e)){a.setLocale(t);var o=r[e];if("@:"===o.substr(0,2))Z(t,o.substr(2),n,a).then(i.resolve,i.reject);else{var s=a.interpolate(r[e],n);s=ut(e,r[e],s,n,t),i.resolve(s)}a.setLocale(c)}else i.reject()};return o.displayName="fallbackTranslationResolver",Q(t).then(o,i.reject),i.promise},tt=function(t,e,n,r){var a,i=y[t];if(i&&Object.prototype.hasOwnProperty.call(i,e)){if(r.setLocale(t),a=r.interpolate(i[e],n),a=ut(e,i[e],a,n,t),"@:"===a.substr(0,2))return tt(t,a.substr(2),n,r);r.setLocale(c)}return a},et=function(t,n,r){if(d){var a=e.get(d)(t,c,n,r);return void 0!==a?a:t}return t},nt=function(t,e,n,a,i){var s=r.defer();if(t<o.length){var c=o[t];Z(c,e,n,a).then(function(t){s.resolve(t)},function(){return nt(t+1,e,n,a,i).then(s.resolve,s.reject)})}else i?s.resolve(i):d?s.resolve(et(e,n)):s.reject(et(e,n));return s.promise},rt=function(t,e,n,r){var a;if(t<o.length){var i=o[t];a=tt(i,e,n,r),a||(a=rt(t+1,e,n,r))}return a},at=function(t,e,n,r){return nt(b>0?b:f,t,e,n,r)},it=function(t,e,n){return rt(b>0?b:f,t,e,n)},ot=function(t,e,n,a,i){var s=r.defer(),c=i?y[i]:y,u=n?V[n]:$;if(c&&Object.prototype.hasOwnProperty.call(c,t)){var l=c[t];if("@:"===l.substr(0,2))X(l.substr(2),e,n,a,i).then(s.resolve,s.reject);else{var f=u.interpolate(l,e);f=ut(t,l,f,e,i),s.resolve(f)}}else{var p;d&&!x&&(p=et(t,e,a)),i&&o&&o.length?at(t,e,u,a).then(function(t){s.resolve(t)},function(t){s.reject(z(t))}):d&&!x&&p?a?s.resolve(a):s.resolve(p):a?s.resolve(a):s.reject(z(t))}return s.promise},st=function(t,e,n,r){var a,i=r?y[r]:y,s=$;if(V&&Object.prototype.hasOwnProperty.call(V,n)&&(s=V[n]),i&&Object.prototype.hasOwnProperty.call(i,t)){var c=i[t];"@:"===c.substr(0,2)?a=st(c.substr(2),e,n,r):(a=s.interpolate(c,e),a=ut(t,c,a,e,r))}else{var u;d&&!x&&(u=et(t,e)),r&&o&&o.length?(f=0,a=it(t,e,s)):a=d&&!x&&u?u:z(t)}return a},ct=function(t){u===t&&(u=void 0),B[t]=void 0},ut=function(t,n,r,a,i){var o=S;return o&&("string"==typeof o&&(o=e.get(o)),o)?o(t,n,r,a,i):r},lt=function(t){y[t]||!g||B[t]||(B[t]=K(t).then(function(t){return j(t.key,t.table),t}))};X.preferredLanguage=function(t){return t&&U(t),a},X.cloakClassName=function(){return P},X.nestedObjectDelimeter=function(){return O},X.fallbackLanguage=function(t){if(void 0!==t&&null!==t){if(Y(t),g&&o&&o.length)for(var e=0,n=o.length;e<n;e++)B[o[e]]||(B[o[e]]=K(o[e]));X.use(X.use())}return s?o[0]:o},X.useFallbackLanguage=function(t){if(void 0!==t&&null!==t)if(t){var e=D(o,t);e>-1&&(b=e)}else b=0},X.proposedLanguage=function(){return u},X.storage=function(){return i},X.negotiateLocale=H,X.use=function(t){if(!t)return c;var e=r.defer();n.$emit("$translateChangeStart",{language:t});var a=H(t);return T.length>0&&!a?r.reject(t):(a&&(t=a),u=t,!I&&y[t]||!g||B[t]?B[t]?B[t].then(function(t){return u===t.key&&q(t.key),e.resolve(t.key),t},function(t){return!c&&o&&o.length>0?X.use(o[0]).then(e.resolve,e.reject):e.reject(t)}):(e.resolve(t),q(t)):(B[t]=K(t).then(function(n){return j(n.key,n.table),e.resolve(n.key),u===t&&q(n.key),n},function(t){return n.$emit("$translateChangeError",{language:t}),e.reject(t),n.$emit("$translateChangeEnd",{language:t}),r.reject(t)}),B[t]["finally"](function(){ct(t)})),e.promise)},X.resolveClientLocale=function(){return G()},X.storageKey=function(){return W()},X.isPostCompilingEnabled=function(){return M},X.isForceAsyncReloadEnabled=function(){return I},X.isKeepContent=function(){return N},X.refresh=function(t){function e(){i.resolve(),n.$emit("$translateRefreshEnd",{language:t})}function a(){i.reject(),n.$emit("$translateRefreshEnd",{language:t})}if(!g)throw new Error("Couldn't refresh translation table, no loader registered!");var i=r.defer();if(n.$emit("$translateRefreshStart",{language:t}),t)if(y[t]){var s=function(n){return j(n.key,n.table),t===c&&q(c),e(),n};s.displayName="refreshPostProcessor",K(t).then(s,a)}else a();else{var u=[],l={};if(o&&o.length)for(var f=0,d=o.length;f<d;f++)u.push(K(o[f])),l[o[f]]=!0;c&&!l[c]&&u.push(K(c));var p=function(t){y={},angular.forEach(t,function(t){j(t.key,t.table)}),c&&q(c),e()};p.displayName="refreshPostProcessor",r.all(u).then(p,a)}return i.promise},X.instant=function(t,e,n,r){var i=r&&r!==c?H(r)||r:c;if(null===t||angular.isUndefined(t))return t;if(r&&lt(r),angular.isArray(t)){for(var s={},u=0,l=t.length;u<l;u++)s[t[u]]=X.instant(t[u],e,n,r);return s}if(angular.isString(t)&&t.length<1)return t;t&&(t=k.apply(t));var f,p=[];a&&p.push(a),i&&p.push(i),o&&o.length&&(p=p.concat(o));for(var g=0,v=p.length;g<v;g++){var E=p[g];if(y[E]&&"undefined"!=typeof y[E][t]&&(f=st(t,e,n,i)),"undefined"!=typeof f)break}return f||""===f||(h||m?f=z(t):(f=$.interpolate(t,e),d&&!x&&(f=et(t,e)))),f},X.versionInfo=function(){return _},X.loaderCache=function(){return E},X.directivePriority=function(){return L},X.statefulFilter=function(){return C},X.isReady=function(){return R};var ft=r.defer();ft.promise.then(function(){R=!0}),X.onReady=function(t){var e=r.defer();return angular.isFunction(t)&&e.promise.then(t),R?e.resolve():ft.promise.then(e.resolve),e.promise},X.getAvailableLanguageKeys=function(){return T.length>0?T:null};var dt=n.$on("$translateReady",function(){ft.resolve(),dt(),dt=null}),pt=n.$on("$translateChangeEnd",function(){ft.resolve(),pt(),pt=null});if(g){if(angular.equals(y,{})&&X.use()&&X.use(X.use()),o&&o.length)for(var gt=function(t){return j(t.key,t.table),n.$emit("$translateChangeEnd",{language:t.key}),t},vt=0,ht=o.length;vt<ht;vt++){var mt=o[vt];!I&&y[mt]||(B[mt]=K(mt).then(gt))}}else n.$emit("$translateReady",{language:X.use()});return X}]}function r(t,e){"use strict";var n,r={},a="default";return r.setLocale=function(t){n=t},r.getInterpolationIdentifier=function(){return a},r.useSanitizeValueStrategy=function(t){return e.useStrategy(t),this},r.interpolate=function(n,r){r=r||{},r=e.sanitize(r,"params");var a;return angular.isNumber(n)?a=""+n:angular.isString(n)?(a=t(n)(r),a=e.sanitize(a,"text")):a="",a},r}function a(t,e,n,r,a,o){"use strict";var s=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:t.directivePriority(),compile:function(e,c){var u=c.translateValues?c.translateValues:void 0,l=c.translateInterpolation?c.translateInterpolation:void 0,f=e[0].outerHTML.match(/translate-value-+/i),d="^(.*)("+n.startSymbol()+".*"+n.endSymbol()+")(.*)",p="^(.*)"+n.startSymbol()+"(.*)"+n.endSymbol()+"(.*)";return function(e,g,v){e.interpolateParams={},e.preText="",e.postText="",e.translateNamespace=i(e);var h={},m=function(t,n,r){if(n.translateValues&&angular.extend(t,a(n.translateValues)(e.$parent)),f)for(var i in r)if(Object.prototype.hasOwnProperty.call(n,i)&&"translateValue"===i.substr(0,14)&&"translateValues"!==i){var o=angular.lowercase(i.substr(14,1))+i.substr(15);t[o]=r[i]}},E=function(t){if(angular.isFunction(E._unwatchOld)&&(E._unwatchOld(),E._unwatchOld=void 0),angular.equals(t,"")||!angular.isDefined(t)){var r=s.apply(g.text()),a=r.match(d);if(angular.isArray(a)){e.preText=a[1],e.postText=a[3],h.translate=n(a[2])(e.$parent);var i=r.match(p);angular.isArray(i)&&i[2]&&i[2].length&&(E._unwatchOld=e.$watch(i[2],function(t){h.translate=t,P()}))}else h.translate=r?r:void 0}else h.translate=t;P()},S=function(t){v.$observe(t,function(e){h[t]=e,P()})};m(e.interpolateParams,v,c);var y=!0;v.$observe("translate",function(t){"undefined"==typeof t?E(""):""===t&&y||(h.translate=t,P()),y=!1});for(var T in v)v.hasOwnProperty(T)&&"translateAttr"===T.substr(0,13)&&S(T);if(v.$observe("translateDefault",function(t){e.defaultText=t,P()}),u&&v.$observe("translateValues",function(t){t&&e.$parent.$watch(function(){angular.extend(e.interpolateParams,a(t)(e.$parent))})}),f){var A=function(t){v.$observe(t,function(n){var r=angular.lowercase(t.substr(14,1))+t.substr(15);e.interpolateParams[r]=n})};for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&"translateValue"===w.substr(0,14)&&"translateValues"!==w&&A(w)}var P=function(){for(var t in h)h.hasOwnProperty(t)&&void 0!==h[t]&&M(t,h[t],e,e.interpolateParams,e.defaultText,e.translateNamespace)},M=function(e,n,r,a,i,o){n?(o&&"."===n.charAt(0)&&(n=o+n),t(n,a,l,i,r.translateLanguage).then(function(t){I(t,r,!0,e)},function(t){I(t,r,!1,e)})):I(n,r,!1,e)},I=function(e,n,a,i){if(a||"undefined"!=typeof n.defaultText&&(e=n.defaultText),"translate"===i){(a||!a&&!t.isKeepContent()&&"undefined"==typeof v.translateKeepContent)&&g.empty().append(n.preText+e+n.postText);var o=t.isPostCompilingEnabled(),s="undefined"!=typeof c.translateCompile,u=s&&"false"!==c.translateCompile;(o&&!s||u)&&r(g.contents())(n)}else{var l=v.$attr[i];"data-"===l.substr(0,5)&&(l=l.substr(5)),l=l.substr(15),g.attr(l,e)}};(u||f||v.translateDefault)&&e.$watch("interpolateParams",P,!0);var O=e.$on("translateLanguageChanged",P),R=o.$on("$translateChangeSuccess",P);g.text().length?E(v.translate?v.translate:""):v.translate&&E(v.translate),P(),e.$on("$destroy",function(){O(),R()})}}}}function i(t){"use strict";return t.translateNamespace?t.translateNamespace:t.$parent?i(t.$parent):void 0}function o(t,e){"use strict";return{compile:function(n){var r=function(){n.addClass(t.cloakClassName())},a=function(){n.removeClass(t.cloakClassName())};return t.onReady(function(){a()}),r(),function(n,i,o){o.translateCloak&&o.translateCloak.length&&(o.$observe("translateCloak",function(e){t(e).then(a,r)}),e.$on("$translateChangeSuccess",function(){t(o.translateCloak).then(a,r)}))}}}}function s(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(t,e,n){t.translateNamespace=i(t),t.translateNamespace&&"."===n.translateNamespace.charAt(0)?t.translateNamespace+=n.translateNamespace:t.translateNamespace=n.translateNamespace}}}}}function i(t){"use strict";return t.translateNamespace?t.translateNamespace:t.$parent?i(t.$parent):void 0}function c(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(t,e,n){n.$observe("translateLanguage",function(e){t.translateLanguage=e}),t.$watch("translateLanguage",function(){t.$broadcast("translateLanguageChanged")})}}}}function u(t,e){"use strict";var n=function(n,r,a,i){return angular.isObject(r)||(r=t(r)(this)),e.instant(n,r,a,i)};return e.statefulFilter()&&(n.$stateful=!0),n}function l(t){"use strict";return t("translations")}return t.$inject=["$translate"],n.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],r.$inject=["$interpolate","$translateSanitization"],a.$inject=["$translate","$q","$interpolate","$compile","$parse","$rootScope"],o.$inject=["$translate","$rootScope"],u.$inject=["$parse","$translate"],l.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(t),t.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",e),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",n),n.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",r),r.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",a),a.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateCloak",o),o.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",s),s.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",c),c.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",u),u.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",l),l.displayName="$translationCache","pascalprecht.translate"}),function(t,e){"function"==typeof define&&define.amd?define([],function(){return e()}):"object"==typeof exports?module.exports=e():e()}(this,function(){function t(t,e){"use strict";return function(n){if(!(n&&(angular.isArray(n.files)||angular.isString(n.prefix)&&angular.isString(n.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");n.files||(n.files=[{prefix:n.prefix,suffix:n.suffix}]);for(var r=function(r){if(!r||!angular.isString(r.prefix)||!angular.isString(r.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");return e(angular.extend({url:[r.prefix,n.key,r.suffix].join(""),method:"GET",params:""},n.$http)).then(function(t){return t.data},function(){return t.reject(n.key)})},a=[],i=n.files.length,o=0;o<i;o++)a.push(r({prefix:n.files[o].prefix,key:n.key,suffix:n.files[o].suffix}));return t.all(a).then(function(t){for(var e=t.length,n={},r=0;r<e;r++)for(var a in t[r])n[a]=t[r][a];return n})}}return t.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",t),t.displayName="$translateStaticFilesLoader","pascalprecht.translate"}),function(){function t(t){function e(e,n,r,a,i,o){for(;i>=0&&i<o;i+=t){var s=a?a[i]:i;r=n(r,e[s],s,e)}return r}return function(n,r,a,i){r=S(r,i,4);var o=!I(n)&&E.keys(n),s=(o||n).length,c=t>0?0:s-1;return arguments.length<3&&(a=n[o?o[c]:c],c+=t),e(n,r,a,o,c,s)}}function e(t){return function(e,n,r){n=y(n,r);for(var a=M(e),i=t>0?0:a-1;i>=0&&i<a;i+=t)if(n(e[i],i,e))return i;return-1}}function n(t,e,n){return function(r,a,i){var o=0,s=M(r);if("number"==typeof i)t>0?o=i>=0?i:Math.max(i+s,o):s=i>=0?Math.min(i+1,s):i+s+1;else if(n&&i&&s)return i=n(r,a),r[i]===a?i:-1;if(a!==a)return i=e(l.call(r,o,s),E.isNaN),i>=0?i+o:-1;for(i=t>0?o:s-1;i>=0&&i<s;i+=t)if(r[i]===a)return i;return-1}}function r(t,e){var n=C.length,r=t.constructor,a=E.isFunction(r)&&r.prototype||s,i="constructor";for(E.has(t,i)&&!E.contains(e,i)&&e.push(i);n--;)i=C[n],i in t&&t[i]!==a[i]&&!E.contains(e,i)&&e.push(i)}var a=this,i=a._,o=Array.prototype,s=Object.prototype,c=Function.prototype,u=o.push,l=o.slice,f=s.toString,d=s.hasOwnProperty,p=Array.isArray,g=Object.keys,v=c.bind,h=Object.create,m=function(){},E=function(t){return t instanceof E?t:this instanceof E?void(this._wrapped=t):new E(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=E),exports._=E):a._=E,E.VERSION="1.8.3";var S=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,a){return t.call(e,n,r,a)};case 4:return function(n,r,a,i){return t.call(e,n,r,a,i)}}return function(){return t.apply(e,arguments)}},y=function(t,e,n){return null==t?E.identity:E.isFunction(t)?S(t,e,n):E.isObject(t)?E.matcher(t):E.property(t)};E.iteratee=function(t,e){return y(t,e,1/0)};var T=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var a=1;a<r;a++)for(var i=arguments[a],o=t(i),s=o.length,c=0;c<s;c++){var u=o[c];e&&void 0!==n[u]||(n[u]=i[u])}return n}},A=function(t){if(!E.isObject(t))return{};if(h)return h(t);m.prototype=t;var e=new m;return m.prototype=null,e},w=function(t){return function(e){return null==e?void 0:e[t]}},P=Math.pow(2,53)-1,M=w("length"),I=function(t){var e=M(t);return"number"==typeof e&&e>=0&&e<=P};E.each=E.forEach=function(t,e,n){e=S(e,n);var r,a;if(I(t))for(r=0,a=t.length;r<a;r++)e(t[r],r,t);else{var i=E.keys(t);for(r=0,a=i.length;r<a;r++)e(t[i[r]],i[r],t)}return t},E.map=E.collect=function(t,e,n){e=y(e,n);for(var r=!I(t)&&E.keys(t),a=(r||t).length,i=Array(a),o=0;o<a;o++){var s=r?r[o]:o;i[o]=e(t[s],s,t)}return i},E.reduce=E.foldl=E.inject=t(1),E.reduceRight=E.foldr=t(-1),E.find=E.detect=function(t,e,n){var r;if(r=I(t)?E.findIndex(t,e,n):E.findKey(t,e,n),void 0!==r&&r!==-1)return t[r]},E.filter=E.select=function(t,e,n){var r=[];return e=y(e,n),E.each(t,function(t,n,a){e(t,n,a)&&r.push(t)}),r},E.reject=function(t,e,n){return E.filter(t,E.negate(y(e)),n)},E.every=E.all=function(t,e,n){e=y(e,n);for(var r=!I(t)&&E.keys(t),a=(r||t).length,i=0;i<a;i++){var o=r?r[i]:i;if(!e(t[o],o,t))return!1}return!0},E.some=E.any=function(t,e,n){e=y(e,n);for(var r=!I(t)&&E.keys(t),a=(r||t).length,i=0;i<a;i++){var o=r?r[i]:i;if(e(t[o],o,t))return!0}return!1},E.contains=E.includes=E.include=function(t,e,n,r){return I(t)||(t=E.values(t)),("number"!=typeof n||r)&&(n=0),E.indexOf(t,e,n)>=0},E.invoke=function(t,e){var n=l.call(arguments,2),r=E.isFunction(e);return E.map(t,function(t){var a=r?e:t[e];return null==a?a:a.apply(t,n)})},E.pluck=function(t,e){return E.map(t,E.property(e))},E.where=function(t,e){return E.filter(t,E.matcher(e))},E.findWhere=function(t,e){return E.find(t,E.matcher(e))},E.max=function(t,e,n){var r,a,i=-(1/0),o=-(1/0);if(null==e&&null!=t){t=I(t)?t:E.values(t);for(var s=0,c=t.length;s<c;s++)r=t[s],r>i&&(i=r)}else e=y(e,n),E.each(t,function(t,n,r){a=e(t,n,r),(a>o||a===-(1/0)&&i===-(1/0))&&(i=t,o=a)});return i},E.min=function(t,e,n){var r,a,i=1/0,o=1/0;if(null==e&&null!=t){t=I(t)?t:E.values(t);for(var s=0,c=t.length;s<c;s++)r=t[s],r<i&&(i=r)}else e=y(e,n),E.each(t,function(t,n,r){a=e(t,n,r),(a<o||a===1/0&&i===1/0)&&(i=t,o=a)});return i},E.shuffle=function(t){for(var e,n=I(t)?t:E.values(t),r=n.length,a=Array(r),i=0;i<r;i++)e=E.random(0,i),e!==i&&(a[i]=a[e]),a[e]=n[i];return a},E.sample=function(t,e,n){return null==e||n?(I(t)||(t=E.values(t)),t[E.random(t.length-1)]):E.shuffle(t).slice(0,Math.max(0,e))},E.sortBy=function(t,e,n){return e=y(e,n),E.pluck(E.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var O=function(t){return function(e,n,r){var a={};return n=y(n,r),E.each(e,function(r,i){var o=n(r,i,e);t(a,r,o)}),a}};E.groupBy=O(function(t,e,n){E.has(t,n)?t[n].push(e):t[n]=[e]}),E.indexBy=O(function(t,e,n){t[n]=e}),E.countBy=O(function(t,e,n){E.has(t,n)?t[n]++:t[n]=1}),E.toArray=function(t){return t?E.isArray(t)?l.call(t):I(t)?E.map(t,E.identity):E.values(t):[]},E.size=function(t){return null==t?0:I(t)?t.length:E.keys(t).length},E.partition=function(t,e,n){e=y(e,n);var r=[],a=[];return E.each(t,function(t,n,i){(e(t,n,i)?r:a).push(t)}),[r,a]},E.first=E.head=E.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:E.initial(t,t.length-e)},E.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},E.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:E.rest(t,Math.max(0,t.length-e))},E.rest=E.tail=E.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},E.compact=function(t){return E.filter(t,E.identity)};var R=function(t,e,n,r){for(var a=[],i=0,o=r||0,s=M(t);o<s;o++){var c=t[o];if(I(c)&&(E.isArray(c)||E.isArguments(c))){e||(c=R(c,e,n));var u=0,l=c.length;for(a.length+=l;u<l;)a[i++]=c[u++]}else n||(a[i++]=c)}return a};E.flatten=function(t,e){return R(t,e,!1)},E.without=function(t){return E.difference(t,l.call(arguments,1))},E.uniq=E.unique=function(t,e,n,r){E.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=y(n,r));for(var a=[],i=[],o=0,s=M(t);o<s;o++){var c=t[o],u=n?n(c,o,t):c;e?(o&&i===u||a.push(c),i=u):n?E.contains(i,u)||(i.push(u),a.push(c)):E.contains(a,c)||a.push(c)}return a},E.union=function(){return E.uniq(R(arguments,!0,!0))},E.intersection=function(t){for(var e=[],n=arguments.length,r=0,a=M(t);r<a;r++){var i=t[r];if(!E.contains(e,i)){for(var o=1;o<n&&E.contains(arguments[o],i);o++);o===n&&e.push(i)}}return e},E.difference=function(t){var e=R(arguments,!0,!0,1);return E.filter(t,function(t){return!E.contains(e,t)})},E.zip=function(){return E.unzip(arguments)},E.unzip=function(t){for(var e=t&&E.max(t,M).length||0,n=Array(e),r=0;r<e;r++)n[r]=E.pluck(t,r);return n},E.object=function(t,e){for(var n={},r=0,a=M(t);r<a;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},E.findIndex=e(1),E.findLastIndex=e(-1),E.sortedIndex=function(t,e,n,r){n=y(n,r,1);for(var a=n(e),i=0,o=M(t);i<o;){var s=Math.floor((i+o)/2);n(t[s])<a?i=s+1:o=s}return i},E.indexOf=n(1,E.findIndex,E.sortedIndex),E.lastIndexOf=n(-1,E.findLastIndex),E.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),a=Array(r),i=0;i<r;i++,t+=n)a[i]=t;return a};var N=function(t,e,n,r,a){if(!(r instanceof e))return t.apply(n,a);var i=A(t.prototype),o=t.apply(i,a);return E.isObject(o)?o:i};E.bind=function(t,e){if(v&&t.bind===v)return v.apply(t,l.call(arguments,1));if(!E.isFunction(t))throw new TypeError("Bind must be called on a function");var n=l.call(arguments,2),r=function(){return N(t,r,e,this,n.concat(l.call(arguments)))};return r},E.partial=function(t){var e=l.call(arguments,1),n=function(){for(var r=0,a=e.length,i=Array(a),o=0;o<a;o++)i[o]=e[o]===E?arguments[r++]:e[o];for(;r<arguments.length;)i.push(arguments[r++]);return N(t,n,this,this,i)};return n},E.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)n=arguments[e],t[n]=E.bind(t[n],t);return t},E.memoize=function(t,e){var n=function(r){var a=n.cache,i=""+(e?e.apply(this,arguments):r);return E.has(a,i)||(a[i]=t.apply(this,arguments)),a[i]};return n.cache={},n},E.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},E.defer=E.partial(E.delay,E,1),E.throttle=function(t,e,n){var r,a,i,o=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:E.now(),o=null,i=t.apply(r,a),o||(r=a=null)};return function(){var u=E.now();s||n.leading!==!1||(s=u);var l=e-(u-s);return r=this,a=arguments,l<=0||l>e?(o&&(clearTimeout(o),o=null),s=u,i=t.apply(r,a),o||(r=a=null)):o||n.trailing===!1||(o=setTimeout(c,l)),i}},E.debounce=function(t,e,n){var r,a,i,o,s,c=function(){var u=E.now()-o;u<e&&u>=0?r=setTimeout(c,e-u):(r=null,n||(s=t.apply(i,a),r||(i=a=null)))};return function(){i=this,a=arguments,o=E.now();var u=n&&!r;return r||(r=setTimeout(c,e)),u&&(s=t.apply(i,a),i=a=null),s}},E.wrap=function(t,e){
return E.partial(e,t)},E.negate=function(t){return function(){return!t.apply(this,arguments)}},E.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},E.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},E.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},E.once=E.partial(E.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];E.keys=function(t){if(!E.isObject(t))return[];if(g)return g(t);var e=[];for(var n in t)E.has(t,n)&&e.push(n);return L&&r(t,e),e},E.allKeys=function(t){if(!E.isObject(t))return[];var e=[];for(var n in t)e.push(n);return L&&r(t,e),e},E.values=function(t){for(var e=E.keys(t),n=e.length,r=Array(n),a=0;a<n;a++)r[a]=t[e[a]];return r},E.mapObject=function(t,e,n){e=y(e,n);for(var r,a=E.keys(t),i=a.length,o={},s=0;s<i;s++)r=a[s],o[r]=e(t[r],r,t);return o},E.pairs=function(t){for(var e=E.keys(t),n=e.length,r=Array(n),a=0;a<n;a++)r[a]=[e[a],t[e[a]]];return r},E.invert=function(t){for(var e={},n=E.keys(t),r=0,a=n.length;r<a;r++)e[t[n[r]]]=n[r];return e},E.functions=E.methods=function(t){var e=[];for(var n in t)E.isFunction(t[n])&&e.push(n);return e.sort()},E.extend=T(E.allKeys),E.extendOwn=E.assign=T(E.keys),E.findKey=function(t,e,n){e=y(e,n);for(var r,a=E.keys(t),i=0,o=a.length;i<o;i++)if(r=a[i],e(t[r],r,t))return r},E.pick=function(t,e,n){var r,a,i={},o=t;if(null==o)return i;E.isFunction(e)?(a=E.allKeys(o),r=S(e,n)):(a=R(arguments,!1,!1,1),r=function(t,e,n){return e in n},o=Object(o));for(var s=0,c=a.length;s<c;s++){var u=a[s],l=o[u];r(l,u,o)&&(i[u]=l)}return i},E.omit=function(t,e,n){if(E.isFunction(e))e=E.negate(e);else{var r=E.map(R(arguments,!1,!1,1),String);e=function(t,e){return!E.contains(r,e)}}return E.pick(t,e,n)},E.defaults=T(E.allKeys,!0),E.create=function(t,e){var n=A(t);return e&&E.extendOwn(n,e),n},E.clone=function(t){return E.isObject(t)?E.isArray(t)?t.slice():E.extend({},t):t},E.tap=function(t,e){return e(t),t},E.isMatch=function(t,e){var n=E.keys(e),r=n.length;if(null==t)return!r;for(var a=Object(t),i=0;i<r;i++){var o=n[i];if(e[o]!==a[o]||!(o in a))return!1}return!0};var b=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof E&&(t=t._wrapped),e instanceof E&&(e=e._wrapped);var a=f.call(t);if(a!==f.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var i="[object Array]"===a;if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,s=e.constructor;if(o!==s&&!(E.isFunction(o)&&o instanceof o&&E.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),i){if(c=t.length,c!==e.length)return!1;for(;c--;)if(!b(t[c],e[c],n,r))return!1}else{var u,l=E.keys(t);if(c=l.length,E.keys(e).length!==c)return!1;for(;c--;)if(u=l[c],!E.has(e,u)||!b(t[u],e[u],n,r))return!1}return n.pop(),r.pop(),!0};E.isEqual=function(t,e){return b(t,e)},E.isEmpty=function(t){return null==t||(I(t)&&(E.isArray(t)||E.isString(t)||E.isArguments(t))?0===t.length:0===E.keys(t).length)},E.isElement=function(t){return!(!t||1!==t.nodeType)},E.isArray=p||function(t){return"[object Array]"===f.call(t)},E.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},E.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){E["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}}),E.isArguments(arguments)||(E.isArguments=function(t){return E.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(E.isFunction=function(t){return"function"==typeof t||!1}),E.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},E.isNaN=function(t){return E.isNumber(t)&&t!==+t},E.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===f.call(t)},E.isNull=function(t){return null===t},E.isUndefined=function(t){return void 0===t},E.has=function(t,e){return null!=t&&d.call(t,e)},E.noConflict=function(){return a._=i,this},E.identity=function(t){return t},E.constant=function(t){return function(){return t}},E.noop=function(){},E.property=w,E.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},E.matcher=E.matches=function(t){return t=E.extendOwn({},t),function(e){return E.isMatch(e,t)}},E.times=function(t,e,n){var r=Array(Math.max(0,t));e=S(e,n,1);for(var a=0;a<t;a++)r[a]=e(a);return r},E.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},E.now=Date.now||function(){return(new Date).getTime()};var $={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},_=E.invert($),x=function(t){var e=function(e){return t[e]},n="(?:"+E.keys(t).join("|")+")",r=RegExp(n),a=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(a,e):t}};E.escape=x($),E.unescape=x(_),E.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),E.isFunction(r)?r.call(t):r};var G=0;E.uniqueId=function(t){var e=++G+"";return t?t+e:e},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,k={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,j=function(t){return"\\"+k[t]};E.template=function(t,e,n){!e&&n&&(e=n),e=E.defaults({},e,E.templateSettings);var r=RegExp([(e.escape||D).source,(e.interpolate||D).source,(e.evaluate||D).source].join("|")+"|$","g"),a=0,i="__p+='";t.replace(r,function(e,n,r,o,s){return i+=t.slice(a,s).replace(H,j),a=s+e.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),e}),i+="';\n",e.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(e.variable||"obj","_",i)}catch(s){throw s.source=i,s}var c=function(t){return o.call(this,t,E)},u=e.variable||"obj";return c.source="function("+u+"){\n"+i+"}",c},E.chain=function(t){var e=E(t);return e._chain=!0,e};var F=function(t,e){return t._chain?E(e).chain():e};E.mixin=function(t){E.each(E.functions(t),function(e){var n=E[e]=t[e];E.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),F(this,n.apply(E,t))}})},E.mixin(E),E.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];E.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],F(this,n)}}),E.each(["concat","join","slice"],function(t){var e=o[t];E.prototype[t]=function(){return F(this,e.apply(this._wrapped,arguments))}}),E.prototype.value=function(){return this._wrapped},E.prototype.valueOf=E.prototype.toJSON=E.prototype.value,E.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return E})}.call(this),angular.module("molkkyscore",["ionic","ngCordova","pascalprecht.translate"]),function(){function t(t,e,r,a){t.decorator("$exceptionHandler",n),e.useStaticFilesLoader({prefix:a+"/",suffix:".json"}).preferredLanguage("english"),r.tabs.style("standard"),r.tabs.position("bottom")}function e(t,e,n,r,a,i,o,s){t.imagesRoot=e,n.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&window.StatusBar.styleDefault(),window.cordova?r.initDatabase().then(function(){var e=[];r.initPlayers().then(function(n){n.forEach(function(t){e.push(r.initPlayerStatistics(t))}),i.all([e]).then(function(){t.$broadcast("appInitialized")})}),r.initOverallStatistics(),r.initGameSettings(),r.initAppSettings().then(function(t){a.use(t.language)}),r.initGameTutorial()},function(t){console.log(t.message)}):r.initBrowserDev()})}function n(t){return function(e,n){t(e,n)}}angular.module("molkkyscore").config(t).run(e),t.$inject=["$provide","$translateProvider","$ionicConfigProvider","LANGUAGES_ROOT"],e.$inject=["$rootScope","IMAGES_ROOT","$ionicPlatform","dataService","$translate","$q","statisticsService","loadingService"],n.$inject=["$delegate"]}(),function(){function t(t,e,n){e.state("game",{url:"/game",templateUrl:t+"/game/game.html",controller:"GameCtrl as game",cache:!1}).state("tab",{url:"/tab","abstract":!0,templateUrl:t+"/layout/tabs.html"}).state("tab.home",{url:"/home",views:{home:{templateUrl:t+"/home/home.html",controller:"HomeCtrl as home"}}}).state("tab.settings",{url:"/home/settings",templateUrl:t+"/settings/settings.html",views:{home:{templateUrl:t+"/settings/settings.html",controller:"SettingsCtrl as settings"}}}).state("tab.statistics",{url:"/statistics",views:{statistics:{templateUrl:t+"/statistics/statistics.html",controller:"StatisticsCtrl as statistics"}}}).state("tab.statistics-listing",{url:"/statistics/:metricId",views:{statistics:{templateUrl:t+"/statistics/statistics-listing.html",controller:"StatisticsListingCtrl as listing"}}}).state("tab.players",{url:"/players",views:{players:{templateUrl:t+"/players/players.html",controller:"PlayersCtrl as players"}}}).state("tab.player-detail",{url:"/players/:playerId",views:{players:{templateUrl:t+"/players/player-detail.html",controller:"PlayerDetailCtrl as playerDetail"}}}),n.otherwise("/tab/home")}angular.module("molkkyscore").config(t),t.$inject=["TEMPLATES_ROOT","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("molkkyscore").constant("TEMPLATES_ROOT","templates").constant("LANGUAGES_ROOT","languages").constant("IMAGES_ROOT","img")}(),function(){"use strict";function t(t,e,n){function r(n,r,a,c){t.show({buttons:[{text:e.instant("HOME.GAME.ACTION-SHEET.GAME-RULES.BUTTON")},{text:e.instant("HOME.GAME.ACTION-SHEET.RESTART.BUTTON"),className:r?"":"disabled"},{text:e.instant("HOME.GAME.ACTION-SHEET.NEW.BUTTON")},{text:e.instant("HOME.GAME.ACTION-SHEET.UNDO.BUTTON"),className:r?"":"disabled"},{text:e.instant("HOME.GAME.ACTION-SHEET.EXIT.BUTTON")}],titleText:e.instant("HOME.GAME.ACTION-SHEET.TITLE"),cancelText:e.instant("HOME.GAME.ACTION-SHEET.CONTINUE.BUTTON"),cancel:function(){c.settingsAnimation=!1},buttonClicked:function(t){switch(c.settingsAnimation=!1,t){case 0:n.showSettingsModal();break;case 1:i(n.restart,a);break;case 2:o(n["new"]);break;case 3:n.undo();break;case 4:s(n.exit,a)}return!0}})}function a(){return u={restartConfirm:{title:e.instant("HOME.GAME.ACTION-SHEET.RESTART.CONFIRM.TITLE"),text:e.instant("HOME.GAME.ACTION-SHEET.RESTART.CONFIRM.TEXT")},newConfirm:{title:e.instant("HOME.GAME.ACTION-SHEET.NEW.CONFIRM.TITLE"),text:e.instant("HOME.GAME.ACTION-SHEET.NEW.CONFIRM.TEXT")},exitConfirm:{title:e.instant("HOME.GAME.ACTION-SHEET.EXIT.CONFIRM.TITLE"),text:e.instant("HOME.GAME.ACTION-SHEET.EXIT.CONFIRM.TEXT")}}}function i(t,n){function r(){var t={title:u.restartConfirm.title,template:u.restartConfirm.text,buttons:[{text:e.instant("HOME.GENERAL.CONFIRM.CANCEL")},{text:"<b>"+e.instant("HOME.GENERAL.CONFIRM.OK")+"</b>",type:"button-positive",onTap:function(t){return!0}}]};return t}n?t():c(r(),t)}function o(t){function n(){var n={title:u.newConfirm.title,template:u.newConfirm.text,cssClass:"three-btn",buttons:[{text:e.instant("HOME.GENERAL.CONFIRM.CANCEL")},{text:"<b>"+e.instant("HOME.GENERAL.CONFIRM.NO")+"</b>",type:"button-positive",onTap:function(e){return t(!0),!1}},{text:"<b>"+e.instant("HOME.GENERAL.CONFIRM.YES")+"</b>",type:"button-positive",onTap:function(e){return t(!1),!1}}]};return n}c(n(),t)}function s(t,n){function r(){var t={title:u.exitConfirm.title,template:u.exitConfirm.text,buttons:[{text:e.instant("HOME.GENERAL.CONFIRM.CANCEL")},{text:"<b>"+e.instant("HOME.GENERAL.CONFIRM.OK")+"</b>",type:"button-positive",onTap:function(t){return!0}}]};return t}n?t():c(r(),t)}function c(t,e){n.show(t).then(function(t){t&&e()})}var u=a(),l={showActionSheet:r,translateActionSheetData:a,showNewPopup:o,showExitPopup:s};return l}angular.module("molkkyscore").factory("gameActionSheetService",t),t.$inject=["$ionicActionSheet","$translate","$ionicPopup"]}(),function(){"use strict";function t(){function t(t,e){var n=_.findIndex(e,function(e){return t===e});return n}function e(t){var e=0;return t.forEach(function(t){t.finishedGame&&(e+=1)}),e}function n(t,e,n){var r="",a=e.score+t;return 0===t&&2===e.missesInARow?r="disqualified"===n.threeMisses?"error":"warning":a>n.winningScore?r="warning":a===n.winningScore&&(r="success"),r}function r(t){var e=t.length;return t.forEach(function(t){(t.finishedGame||t.disqualified)&&(e-=1)}),e<2}function a(t){return t[0].scoreHistory.length}function i(t,e){switch(e.threeMisses){case"to zero":t.score=0,t.missesInARow=0;break;case"halved":t.score=Math.floor(t.score/2),t.missesInARow=0;break;case"disqualified":t.disqualified=!0,t.score=0}return t}function o(t,e){switch(e.winningScoreExceeded){case"to zero":t.score=0;break;case"halved":t.score=Math.floor(t.score/2);break;case"half of winning score":t.score=Math.floor(e.winningScore/2)}return t}var s={getActivePlayerIndex:t,getEndPosition:e,getActivatedAvatarStatus:n,isGameEnded:r,isGameStarted:a,processThreeMisses:i,processWinningScoreExceeded:o};return s}angular.module("molkkyscore").factory("gameUtilities",t),t.$inject=[]}(),function(){"use strict";function t(t,e,n,r,a,i,o,s,c,u,l,f,d,p,g){function v(){h(),m(),S(),E(),y(),T(),A(),L(),i.getTutorial().showInvite&&V()}function h(){X.participants=i.initParticipants()}function m(){X.scoreboard=i.initScoreboard(X.scoreboard)}function E(){X.gameEnded=!1,Y(),X.activePlayer=X.participants[0]}function S(){q=_.clone(s.getParameters().game),q.isCustom||s.assignDefaultGameParameters(q)}function y(){return u.initScoreDetailsModal(t).then(function(t){return X.scoreDetailsModal=t,X.scoreDetailsModal})}function T(){return W(),u.initGameRulesModal(t).then(function(t){return X.gameRulesModal=t,X.gameRulesModal})}function A(){function e(){X.scoreDetailsModal.hide(),h(),m(),E()}return u.getAddPlayersToGameModal(t,e).then(function(t){return z=t})}function w(t,e){if(!B(t)&&(0===e||1===e?X.activatedScore.value=X.activatedScore.value===e?Y().value:e:X.activatedScore.singlePin&&X.activatedScore.value===e?X.activatedScore.singlePin=!1:X.activatedScore.value===e?(Y(),X.activePlayer.activatedAvatarStatus=""):(X.activatedScore.value=e,X.activatedScore.singlePin=!0),X.activatedScore.value>-1)){var n=X.activatedScore.value,r=o.getActivatedAvatarStatus(n,X.activePlayer,q);X.activePlayer.activatedAvatarStatus=r}}function P(t){B(t)||X.activatedScore.value<0||(X.activePlayer.activatedAvatarStatus="",k(),o.isGameEnded(X.participants)?(X.gameEnded=!0,X.scoreDetailsModal.show()):H())}function M(){X.scoreListSortPredicate=X.isDetailsScoreListSorted?["-score","endPosition"]:""}function I(){return X.participants[0]?new Array(X.activePlayer.scoreHistory.length+1):[]}function O(t){B(t)||X.scoreDetailsModal.show()}function R(){l.showExitPopup(D,o.isGameEnded(X.participants))}function N(){l.showNewPopup(x)}function L(){return K.showSettingsModal=b,K.restart=$,K["new"]=x,K.undo=G,K.exit=D,K}function C(t){if(!B(t)){var e=o.isGameStarted(X.participants),n=o.isGameEnded(X.participants);X.settingsAnimation=!0,l.showActionSheet(K,e,n,X)}}function b(){X.gameRulesModal.show()}function $(){o.isGameStarted(X.participants)&&(f.show("RESTARTING-GAME"),X.participants=i.initParticipants(),m(),E())}function x(t){t?z.show():(X.scoreDetailsModal.hide(),f.show("STARTING-NEW-GAME"),i.sortParticipantsOnScore(),X.participants=i.initParticipants(),m(),E())}function G(){if(o.isGameStarted(X.participants)){var t=o.getActivePlayerIndex(X.activePlayer,X.participants);j(X.activePlayer.scoreHistory.length+1,t),F(X.activePlayer),d.show(J.undoLast)}}function D(){n.go("tab.home")}function k(){(X.activatedScore.singlePin||1===X.activatedScore.value)&&c.updateStatistics("playerThrowsSinglePin",X.activePlayer,!1),X.activePlayer.scoreHistory.unshift(_.clone(X.activatedScore)),c.updateStatistics("playerThrow",X.activePlayer,!1),X.activePlayer.score+=X.activatedScore.value,X.activePlayer.missesInARow=X.activatedScore.value?0:X.activePlayer.missesInARow+1,Y(),X.activePlayer.missesInARow>2?(o.processThreeMisses(X.activePlayer,q),d.show(X.activePlayer.firstName+" "+X.activePlayer.lastName+" "+J.threeMisses)):X.activePlayer.score>q.winningScore?(o.processWinningScoreExceeded(X.activePlayer,q),d.show(X.activePlayer.firstName+" "+X.activePlayer.lastName+" "+J.maxScoreExceeded)):X.activePlayer.score===q.winningScore&&(X.activePlayer.finishedGame=!0,X.activePlayer.endPosition=o.getEndPosition(X.participants),c.updateStatistics("playerReachedMaxScore",X.activePlayer,!1),1===X.activePlayer.endPosition&&(X.scoreDetailsModal.show(),d.show(X.activePlayer.firstName+" "+X.activePlayer.lastName+" "+J.winner),c.updateStatistics("playerWonGame",X.activePlayer,!1))),X.activePlayer.accumulatedScoreHistory.push(X.activePlayer.disqualified?"X":X.activePlayer.score)}function H(){var t=o.getActivePlayerIndex(X.activePlayer,X.participants),e=t>=X.participants.length-1;X.activePlayer=e?X.participants[0]:X.participants[t+1],(X.activePlayer.finishedGame||X.activePlayer.disqualified)&&H()}function j(t,e){var n=o.getActivePlayerIndex(X.activePlayer,X.participants),r=0===n;r?X.activePlayer=X.participants[X.participants.length-1]:X.activePlayer=X.participants[n-1],n=o.getActivePlayerIndex(X.activePlayer,X.participants);var a=e>n;a?t!==X.activePlayer.scoreHistory.length&&j(t,e):t!==X.activePlayer.scoreHistory.length+1&&j(t,e)}function F(t){U(t);var e=t.accumulatedScoreHistory.length<2;Y(),t.scoreHistory.shift(),t.accumulatedScoreHistory.pop(),t.score=e?0:t.accumulatedScoreHistory[t.accumulatedScoreHistory.length-1],t.missesInARow&&(t.missesInARow=t.missesInARow-1),t.finishedGame=!1,t.disqualified=!1,t.endPosition=-1,t.activatedAvatarStatus=""}function U(t){c.updateStatistics("playerThrow",X.activePlayer,!0),t.scoreHistory[0].singlePin&&c.updateStatistics("playerThrowsSinglePin",X.activePlayer,!0),t.finishedGame&&c.updateStatistics("playerReachedMaxScore",X.activePlayer,!0),1===t.endPosition&&c.updateStatistics("playerWonGame",X.activePlayer,!0)}function Y(){return X.activatedScore.value=-1,X.activatedScore.singlePin=!1,X.activatedScore}function W(){var t=s.getOptions().game,e=q.winningScoreExceeded,n=t.winningScoreExceeded.indexOf(e)+1,a=r.instant("HOME.SETTINGS.TABS.GAME.WINNING-SCORE-EXCEEDED.OPTION-"+n),i=t.threeMisses.indexOf(q.threeMisses)+1,o=r.instant("HOME.SETTINGS.TABS.GAME.THREE-MISSES.OPTION-"+i);X.gameRulesModalVariables.isCustom=q.isCustom,X.gameRulesModalVariables.winningScore=q.winningScore,X.gameRulesModalVariables.winningScoreExceeded=a,X.gameRulesModalVariables.threeMisses=o}function V(){X.tutorialTranslationId="HOME.TUTORIAL.INVITE-POPUP.TEXT",X.tutorialNeverAskAgain=!1;var e={title:r.instant("HOME.TUTORIAL.INVITE-POPUP.TITLE"),templateUrl:a+"/game/popup-tutorial.html",scope:t,buttons:[{text:r.instant("HOME.GENERAL.CONFIRM.NO")},{text:"<b>"+r.instant("HOME.GENERAL.CONFIRM.YES")+"</b>",type:"button-positive",onTap:function(t){return!0}}]};p.show(e).then(function(e){e&&g.startTutorial(t.$new(!0)),X.tutorialNeverAskAgain&&(i.getTutorial().showInvite=!1,i.updateTutorial())})}function B(t){if(g.isTutorialOngoing()&&(g.proceedTutorial(t),g.isPreventClickHandler()))return!0}var X=this,z={},q={},K={},J=d.getMessages().game;X.participants=[],X.scoreboard={},X.activatedScore={},X.activePlayer={},X.gameEnded=!1,X.gameRulesModal={},X.gameRulesModalVariables={},X.scoreDetailsModal={},X.scoreDetailsModalActiveTabIndex=0,X.isDetailsScoreListSorted=!1,X.scoreListSortPredicate="",X.toggleScoreListSortPredicate=M,X.activateScore=w,X.processThrow=P,X.getScoreboardDetailsRowIterator=I,X.showScoreDetailsModal=O,X.showActionSheet=C,X.showExitGamePopup=R,X.showNewGamePopup=N,v(),e.$on("$translateChangeSuccess",function(){l.translateActionSheetData(),J=d.getMessages().game}),t.$on("tutorial:finished",function(t){Y(),t.stopPropagation()}),t.$on("$destroy",function(){z.remove(),X.scoreDetailsModal.remove()})}angular.module("molkkyscore").controller("GameCtrl",t),t.$inject=["$scope","$rootScope","$state","$translate","TEMPLATES_ROOT","gameService","gameUtilities","settingsService","statisticsService","modalsService","gameActionSheetService","loadingService","toast","$ionicPopup","tutorialService"]}(),function(){"use strict";function t(t,e){function n(t){u=t}function r(){return u}function a(){return u.forEach(function(t){t.score=0,t.scoreHistory=[],t.accumulatedScoreHistory=[],t.missesInARow=0,t.finishedGame=!1,t.disqualified=!1,t.endPosition=-1,t.activedAvatarStatus=""}),u}function i(){return u.sort(function(t,e){return t.score<e.score?1:t.score>e.score?-1:t.endPosition>e.endPosition?1:t.endPosition<e.endPosition?-1:0}),u}function o(t){switch(t.rowOne=u.slice(0,4),t.rowTwo=u.slice(4,8),u.length){case 2:t.colWidthPercentage=50;break;case 3:t.colWidthPercentage=33;break;default:t.colWidthPercentage=25}return t}function s(){return _.isEmpty(l)&&(l=e.getGameTutorial()),l}function c(){e.updateGameTutorial()}var u=[],l={},f={setParticipants:n,getParticipants:r,initParticipants:a,sortParticipantsOnScore:i,initScoreboard:o,getTutorial:s,updateTutorial:c};return f}angular.module("molkkyscore").factory("gameService",t),t.$inject=["playersService","dataService"]}(),function(){"use strict";function t(t,e,n,r){function a(){i()}function i(){function t(){n.go("game")}return r.getAddPlayersToGameModal(e,t).then(function(t){return s.addPlayersToGameModal=t,s.addPlayersToGameModal})}function o(){window.open("http://www.molkky.world","_system","location=yes")}var s=this;s.addPlayersToGameModal={},s.visitWebsite=o,a(),e.$on("appInitialized",function(){_.isEmpty(s.addPlayersToGameModal)||s.addPlayersToGameModal.remove(),i()}),e.$on("$destroy",function(){s.addPlayersToGameModal.remove()})}angular.module("molkkyscore").controller("HomeCtrl",t),t.$inject=["$rootScope","$scope","$state","modalsService"]}(),function(){"use strict";function t(t,e,n){function r(r){t.loadingMessage=r,n.show({templateUrl:e+"/loading/loading.html",noBackdrop:!0,duration:1e3})}function a(r){t.loadingMessage=r,n.show({templateUrl:e+"/loading/loading.html",noBackdrop:!0})}function i(){n.hide()}var o={show:r,showIndefinite:a,hide:i};return o}angular.module("molkkyscore").factory("loadingService",t),t.$inject=["$rootScope","TEMPLATES_ROOT","$ionicLoading"]}(),function(){"use strict";function t(t,e,n,r,a,i,o){function s(e,s){function c(t){if(8===y.viewModel.participants.length)return void i.show(f.maxParticipants);var e=_.findIndex(y.viewModel.playersInDatabase,function(e){return e.id===t.id}),n=y.viewModel.playersInDatabase.splice(e,1)[0];y.viewModel.participants.push(n)}function u(){if(8===y.viewModel.participants.length)return void i.show(f.maxParticipants);var t=m();y.viewModel.participants.push({firstName:"Mr.",lastName:E(t),tagline:"I'm a guest player",guestColor:t})}function d(t){var e=y.viewModel.participants.splice(t,1)[0];e.guestColor?y.viewModel.guestColors.push(e.guestColor):y.viewModel.playersInDatabase.push(e)}function p(t,e,n){y.viewModel.participants.splice(e,1),y.viewModel.participants.splice(n,0,t)}function g(){S.hide()}function v(){r.setParticipants(y.viewModel.participants.slice()),o.show("STARTING-GAME"),S.hide().then(function(){s()})}function h(){y.viewModel.showReorder=!1,y.viewModel.guestColors=l(),y.viewModel.playersInDatabase=a.all().slice(),y.viewModel.participants=[]}function m(){var t=Math.floor(Math.random()*y.viewModel.guestColors.length);return y.viewModel.guestColors.splice(t,1)[0]}function E(t){return t.charAt(0).toUpperCase()+t.slice(1)}var S={},y=e.$new(!0),T=l();return y.$on("modal.hidden",function(){angular.element(document).find("body").removeClass("modal-open")}),n.fromTemplateUrl(t+"/modals/modal-start-players.html",{scope:y,animation:"slide-in-up"}).then(function(t){return S=t,y.viewModel={showReorder:!1,guestColors:T,playersInDatabase:a.all().slice(),participants:[],addPlayerToParticipants:c,addGuestParticipant:u,removePlayerFromParticipants:d,reorderParticipant:p,cancelAddPlayersToGame:g,startGame:v},y.$on("modal.hidden",function(){h()}),S})}function c(e){return e.$on("modal.hidden",function(){angular.element(document).find("body").removeClass("modal-open")}),n.fromTemplateUrl(t+"/game/modal-score-details.html",{scope:e,animation:"slide-in-up"})}function u(e){return e.$on("modal.hidden",function(){angular.element(document).find("body").removeClass("modal-open")}),n.fromTemplateUrl(t+"/game/modal-game-rules.html",{scope:e,animation:"slide-in-up"})}function l(){return["blonde","orange","pink","white","brown","blue","green","purple"]}var f=i.getMessages().start,d={getAddPlayersToGameModal:s,initScoreDetailsModal:c,initGameRulesModal:u};return e.$on("$translateChangeSuccess",function(){f=i.getMessages().start}),d}angular.module("molkkyscore").factory("modalsService",t),t.$inject=["TEMPLATES_ROOT","$rootScope","$ionicModal","gameService","playersService","toast","loadingService"]}(),function(){"use strict";function t(t,e,n,r,a,i,o,s,c,u,l){function f(){d(),p(),g()}function d(){var t=["versatility","winningRatio","accuracy","efficiency"],e={};return t.forEach(function(t){e=i.getMetricByKey(t),S.metricDonuts.push({translationId:e.translationId,value:S.player.statistics.metrics[t],unit:e.unit})}),S.metricDonuts}function p(){function t(t,e,n){var r={};return r.title=t,r.value=e,r.unit=n?n:"",r}var e=[t(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.FIRST-NAME"),S.player.firstName),t(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.LAST-NAME"),S.player.lastName),t(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.TAGLINE"),S.player.tagline)],n=[t(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.GAMES-PLAYED"),S.player.statistics.rawData.gamesPlayed),t(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.GAMES-WON"),S.player.statistics.rawData.gamesWon),t(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.GAMES-REACHED-MAX-SCORE"),S.player.statistics.rawData.gamesReachedMaxScore),t(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.THROWS"),S.player.statistics.rawData["throws"]),t(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.THROWS-SINGLE-PIN"),S.player.statistics.rawData.throwsSinglePin),t(c.instant("HOME.PLAYERS.DETAIL.PROFILE-DATA-LABELS.THROWS-REACHED-MAX-SCORE"),S.player.statistics.rawData.throwsInGamesReachedMaxScore)];return S.profileData.profile=e,S.profileData.statistics=n,S.profileData}function g(){y.$on("modal.hidden",function(){angular.element(document).find("body").removeClass("modal-open")}),o.fromTemplateUrl(r+"/players/modal-edit-player.html",{scope:y,animation:"slide-in-up"}).then(function(t){S.editPlayerModal=t,y.viewModel={player:{},takePicture:h,removeAvatar:m,confirmPlayer:E}})}function v(t){y.viewModel.player=t,S.editPlayerModal.show()}function h(t){if(window.cordova){var e=t?Camera.PictureSourceType.PHOTOLIBRARY:Camera.PictureSourceType.CAMERA,n={quality:90,destinationType:Camera.DestinationType.DATA_URL,sourceType:e,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,targetWidth:150,targetHeight:150,saveToPhotoAlbum:!1,correctOrientation:!0};u.getPicture(n).then(function(t){y.viewModel.player.face="data:image/jpeg;base64,"+t},function(t){console.log(t.message)})}}function m(){var t={title:c.instant("HOME.PLAYERS.EDIT-PLAYER-MODAL.REMOVE-AVATAR-POPUP.TITLE"),template:c.instant("HOME.PLAYERS.EDIT-PLAYER-MODAL.REMOVE-AVATAR-POPUP.TEXT"),buttons:[{text:c.instant("HOME.GENERAL.CONFIRM.NO")},{text:"<b>"+c.instant("HOME.GENERAL.CONFIRM.YES")+"</b>",type:"button-positive",onTap:function(t){return!0}}]};s.confirm(t).then(function(t){t&&(y.viewModel.player.face="")})}function E(t){return y.viewModel.player.firstName&&y.viewModel.player.lastName?(y.viewModel.player.tagline||(y.viewModel.player.tagline="No tagline provided"),p(),a.updatePlayer(S.player),l.show(T.updateSaved),void S.editPlayerModal.hide()):void l.show(T.requiredFields)}var S=this,y=t.$new(!0),T=l.getMessages().players;S.player=a.get(n.playerId),S.editPlayerModal={},S.showPlayerModal=v,S.metricDonuts=[],S.profileData={},f(),e.$on("$translateChangeSuccess",function(){T=l.getMessages().players}),t.$on("$destroy",function(){S.editPlayerModal.remove()})}angular.module("molkkyscore").controller("PlayerDetailCtrl",t),t.$inject=["$scope","$rootScope","$stateParams","TEMPLATES_ROOT","playersService","statisticsService","$ionicModal","$ionicPopup","$translate","$cordovaCamera","toast"]}(),function(){"use strict";function t(t,e,n,r,a,i,o,s,c,u,l,f){function d(){p()}function p(){P.$on("modal.hidden",function(){angular.element(document).find("body").removeClass("modal-open")}),s.fromTemplateUrl(i+"/players/modal-add-player.html",{scope:P,animation:"slide-in-up"}).then(function(t){w.addPlayerModal=t,P.viewModel={player:{},takePicture:v,removeAvatar:h,cancelPlayer:m,confirmPlayer:E}})}function g(){P.viewModel.player=y(),w.addPlayerModal.show()}function v(t){if(window.cordova){var e=t?Camera.PictureSourceType.PHOTOLIBRARY:Camera.PictureSourceType.CAMERA,n={quality:90,destinationType:Camera.DestinationType.DATA_URL,sourceType:e,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,targetWidth:150,targetHeight:150,saveToPhotoAlbum:!1,correctOrientation:!0};l.getPicture(n).then(function(t){P.viewModel.player.face="data:image/jpeg;base64,"+t},function(t){console.log(t.message)})}}function h(){var t={title:c.instant("HOME.PLAYERS.ADD-PLAYER-MODAL.REMOVE-AVATAR-POPUP.TITLE"),template:c.instant("HOME.PLAYERS.ADD-PLAYER-MODAL.REMOVE-AVATAR-POPUP.TEXT"),buttons:[{text:c.instant("HOME.GENERAL.CONFIRM.NO")},{text:"<b>"+c.instant("HOME.GENERAL.CONFIRM.YES")+"</b>",type:"button-positive",onTap:function(t){return!0}}]};o.confirm(t).then(function(t){t&&(P.viewModel.player.face="")})}function m(){P.viewModel.player={},w.addPlayerModal.hide()}function E(t){return P.viewModel.player.firstName&&P.viewModel.player.lastName?(T(P.viewModel.player),w.players.push(P.viewModel.player),u.clearCache(),a.addPlayer(P.viewModel.player),f.show(P.viewModel.player.firstName+" "+M.addPlayer),void w.addPlayerModal.hide()):void f.show(M.requiredFields)}function S(t){var e="HOME.PLAYERS.REMOVE-POPUP.TEXT",r={playerName:t.firstName+" "+t.lastName};o.confirm({title:c.instant("HOME.PLAYERS.REMOVE-POPUP.TITLE"),template:c.instant(e,r),okText:c.instant("HOME.GENERAL.CONFIRM.YES"),cancelText:c.instant("HOME.GENERAL.CONFIRM.NO")}).then(function(e){e&&(n.remove(t),u.clearCache(),a.removePlayer(t),f.show(t.firstName+" "+M.removePlayer)),w.removeVisible=!1})}function y(){var t=A(),e={id:t,firstName:"",lastName:"",tagline:"",face:""};return e}function T(t){return t.tagline||(t.tagline="No tagline provided"),r.initPlayerStatistics(t),t}function A(){return w.players.length?_.max(w.players,function(t){return t.id}).id+1:0}var w=this,P=t.$new(!0),M=f.getMessages().players;w.players=n.all(),w.removeVisible=!1,w.showRemoveConfirmPopup=S,w.addPlayerModal={},w.showPlayerModal=g,d(),e.$on("$translateChangeSuccess",function(){M=f.getMessages().players}),t.$on("$destroy",function(){w.addPlayerModal.remove()})}angular.module("molkkyscore").controller("PlayersCtrl",t),t.$inject=["$scope","$rootScope","playersService","statisticsService","dataService","TEMPLATES_ROOT","$ionicPopup","$ionicModal","$translate","$ionicHistory","$cordovaCamera","toast"]}(),function(){"use strict";function t(t){function e(){return _.isEmpty(i)&&(i=t.getAllPlayers()),i}function n(t){for(var e=0;e<i.length;e++)if(i[e].id===parseInt(t))return i[e];return null}function r(t){i.splice(i.indexOf(t),1)}function a(e){t.updatePlayerProfile(e)}var i={},o={all:e,get:n,remove:r,updatePlayer:a};return o}angular.module("molkkyscore").factory("playersService",t),t.$inject=["dataService"];
}(),function(){"use strict";function t(t,e){function n(){function t(){return{rawData:{"throws":148,throwsSinglePin:126,throwsInGamesReachedMaxScore:89,gamesPlayed:64,gamesReachedMaxScore:51,gamesWon:41},metrics:{totalWins:41,versatility:78,winningRatio:86,accuracy:58,efficiency:74}}}x=[{id:0,firstName:"John",lastName:"Doe",tagline:"Look at my tagline",face:"img/dummy-man.jpg",statistics:t()},{id:1,firstName:"Jane",lastName:"Doe",tagline:"Hey, it's me!",face:"img/dummy-woman.jpg",statistics:t()},{id:2,firstName:"Adam",lastName:"McCarthy",tagline:"I should buy a boat",face:"img/perry.png",statistics:t()},{id:3,firstName:"Ben",lastName:"Dillon",tagline:"Molkky is fun!",face:"img/ben.png",statistics:t()}],G={totalGamesPlayed:89},D={isCustom:!1,winningScore:50,winningScoreExceeded:"half of winning score",threeMisses:"disqualified"},k={language:"english"},H={showInvite:!0}}function r(){if(window.cordova)return _=t.openDB({name:"number-kubb-score.db",location:"default"}),P(_)}function a(){var e="SELECT * FROM PLAYERS";return t.execute(_,e).then(function(t){for(var e=0;e<t.rows.length;e++){var n=t.rows.item(e);x.push({id:n.ID,firstName:n.FIRSTNAME,lastName:n.LASTNAME,tagline:n.TAGLINE,face:n.FACE,statistics:{}})}return x})}function i(n){var r={},a="SELECT * FROM STATISTICS_PLAYER_RAW_DATA WHERE PLAYER_ID="+n.id+" LIMIT 1",i="SELECT * FROM STATISTICS_PLAYER_METRICS WHERE PLAYER_ID="+n.id+" LIMIT 1";return e.all([t.execute(_,a),t.execute(_,i)]).then(function(t){return r.rawData={"throws":t[0].rows.item(0).THROWS,throwsSinglePin:t[0].rows.item(0).THROWS_SINGLE_PIN,throwsInGamesReachedMaxScore:t[0].rows.item(0).THROWS_IN_GAMES_REACHED_MAX_SCORE,gamesPlayed:t[0].rows.item(0).GAMES_PLAYED,gamesReachedMaxScore:t[0].rows.item(0).GAMES_REACHED_MAX_SCORE,gamesWon:t[0].rows.item(0).GAMES_WON},r.metrics={totalWins:t[1].rows.item(0).TOTAL_WINS,versatility:t[1].rows.item(0).VERSATILITY,winningRatio:t[1].rows.item(0).WINNING_RATIO,accuracy:t[1].rows.item(0).ACCURACY,efficiency:t[1].rows.item(0).EFFICIENCY},n.statistics=r,r})}function o(){var e="SELECT * FROM STATISTICS_OVERALL_METRICS LIMIT 1";return t.execute(_,e).then(function(t){return t.rows.length?(G.totalGamesPlayed=t.rows.item(0).TOTAL_GAMES_PLAYED,G):void 0},function(t){console.error(t.message)})}function s(){var e="SELECT * FROM GAME_SETTINGS LIMIT 1";return t.execute(_,e).then(function(t){return t.rows.length?(D.isCustom=1===t.rows.item(0).IS_CUSTOM,D.winningScore=t.rows.item(0).WINNING_SCORE,D.winningScoreExceeded=t.rows.item(0).WINNING_SCORE_EXCEEDED,D.threeMisses=t.rows.item(0).THREE_MISSES,D):void 0},function(t){console.error(t.message)})}function c(){var e="SELECT * FROM APP_SETTINGS LIMIT 1";return t.execute(_,e).then(function(t){return t.rows.length?(k.language=t.rows.item(0).LANGUAGE,k):void 0},function(t){console.error(t.message)})}function u(){var e="SELECT * FROM GAME_TUTORIAL LIMIT 1";return t.execute(_,e).then(function(t){return t.rows.length?(H.showInvite=1===t.rows.item(0).SHOW_INVITE,H):void 0},function(t){console.error(t.message)})}function l(){return x}function f(){return G}function d(){return D}function p(){return{winningScore:50,winningScoreExceeded:"half of winning score",threeMisses:"disqualified"}}function g(){return k}function v(){return H}function h(t){window.cordova&&(M(t),I(t))}function m(){if(window.cordova){var e=G.totalGamesPlayed,n="UPDATE STATISTICS_OVERALL_METRICS SET TOTAL_GAMES_PLAYED="+e;t.execute(_,n).then(function(t){},function(t){console.error(t.message)})}}function E(){if(window.cordova){var e=D.isCustom?1:0,n=D.winningScore,r=D.winningScoreExceeded,a=D.threeMisses,i="UPDATE GAME_SETTINGS SET IS_CUSTOM="+e+", WINNING_SCORE="+n+', WINNING_SCORE_EXCEEDED="'+r+'", THREE_MISSES="'+a+'"';t.execute(_,i).then(function(t){},function(t){console.error(t.message)})}}function S(){if(window.cordova){var e=k.language,n='UPDATE APP_SETTINGS SET LANGUAGE="'+e+'"';t.execute(_,n).then(function(t){},function(t){console.error(t.message)})}}function y(){if(window.cordova){var e=H.showInvite?1:0,n='UPDATE GAME_TUTORIAL SET SHOW_INVITE="'+e+'"';t.execute(_,n).then(function(t){},function(t){console.error(t.message)})}}function T(e){if(window.cordova){var n='UPDATE PLAYERS SET FIRSTNAME="'+e.firstName+'", LASTNAME="'+e.lastName+'", TAGLINE="'+e.tagline+'", FACE="'+e.face+'" WHERE ID='+e.id;t.execute(_,n).then(function(t){},function(t){console.error(t.message)})}}function A(e){if(window.cordova){var n=[e.id,e.firstName,e.lastName,e.tagline,e.face],r="INSERT INTO PLAYERS (ID, FIRSTNAME, LASTNAME, TAGLINE, FACE) VALUES (?,?,?,?,?)";t.execute(_,r,n),R(e)}}function w(e){if(window.cordova){var n="DELETE FROM PLAYERS WHERE ID="+e.id,r="DELETE FROM STATISTICS_PLAYER_RAW_DATA WHERE PLAYER_ID="+e.id,a="DELETE FROM STATISTICS_PLAYER_METRICS WHERE PLAYER_ID="+e.id;t.execute(_,n),t.execute(_,r),t.execute(_,a)}}function P(n){var r="CREATE TABLE IF NOT EXISTS PLAYERS (ID integer, FIRSTNAME text, LASTNAME text, TAGLINE text, FACE text)",a="CREATE TABLE IF NOT EXISTS STATISTICS_PLAYER_RAW_DATA (PLAYER_ID integer, THROWS integer, THROWS_SINGLE_PIN integer, THROWS_IN_GAMES_REACHED_MAX_SCORE integer, GAMES_PLAYED integer, GAMES_REACHED_MAX_SCORE integer, GAMES_WON integer)",i="CREATE TABLE IF NOT EXISTS STATISTICS_PLAYER_METRICS (PLAYER_ID integer, TOTAL_WINS integer, VERSATILITY decimal(5,4), WINNING_RATIO decimal(5,4), ACCURACY decimal(5,4), EFFICIENCY decimal(5,4))",s="CREATE TABLE IF NOT EXISTS STATISTICS_OVERALL_METRICS (TOTAL_GAMES_PLAYED integer)",c="CREATE TABLE IF NOT EXISTS GAME_SETTINGS (IS_CUSTOM tinyint(1), WINNING_SCORE integer, WINNING_SCORE_EXCEEDED text, THREE_MISSES text)",u="CREATE TABLE IF NOT EXISTS APP_SETTINGS (LANGUAGE text)",l="CREATE TABLE IF NOT EXISTS GAME_TUTORIAL (SHOW_INVITE tinyint(1))";return e.all([t.execute(n,r),t.execute(n,a),t.execute(n,i),t.execute(n,s),t.execute(n,c),t.execute(n,u),t.execute(n,l)]).then(function(t){return o().then(function(t){if(!t)return e.all([O(),N(),L(),C(),b()])})})}function M(e){var n=e.statistics.rawData,r="UPDATE STATISTICS_PLAYER_RAW_DATA SET THROWS="+n["throws"]+", THROWS_SINGLE_PIN="+n.throwsSinglePin+", THROWS_IN_GAMES_REACHED_MAX_SCORE="+n.throwsInGamesReachedMaxScore+", GAMES_PLAYED="+n.gamesPlayed+", GAMES_REACHED_MAX_SCORE="+n.gamesReachedMaxScore+", GAMES_WON="+n.gamesWon+" WHERE PLAYER_ID="+e.id;t.execute(_,r).then(function(t){},function(t){console.error(t.message)})}function I(e){var n=e.statistics.metrics,r="UPDATE STATISTICS_PLAYER_METRICS SET TOTAL_WINS="+n.totalWins+", VERSATILITY="+n.versatility+", WINNING_RATIO="+n.winningRatio+", ACCURACY="+n.accuracy+", EFFICIENCY="+n.efficiency+" WHERE PLAYER_ID="+e.id;t.execute(_,r).then(function(t){},function(t){console.error(t.message)})}function O(){var n=["1","John","Doe","Look at my tagline","img/dummy-man.jpg"],r=["2","Jane","Doe","Hey, it's me!","img/dummy-woman.jpg"],a="INSERT INTO PLAYERS (ID, FIRSTNAME, LASTNAME, TAGLINE, FACE) VALUES (?,?,?,?,?)";return e.all([t.execute(_,a,n),t.execute(_,a,r)]).then(function(t){return $().then(function(t){var n=[];return t.forEach(function(t){n.push(R(t))}),e.all(n)})})}function R(n){var r="INSERT INTO STATISTICS_PLAYER_RAW_DATA (PLAYER_ID, THROWS, THROWS_SINGLE_PIN, THROWS_IN_GAMES_REACHED_MAX_SCORE, GAMES_PLAYED, GAMES_REACHED_MAX_SCORE, GAMES_WON) VALUES (?,?,?,?,?,?,?)",a="INSERT INTO STATISTICS_PLAYER_METRICS (PLAYER_ID, TOTAL_WINS, VERSATILITY, WINNING_RATIO, ACCURACY, EFFICIENCY) VALUES (?,?,?,?,?,?)";return e.all([t.execute(_,r,[n.id,0,0,0,0,0,0]),t.execute(_,a,[n.id,0,0,0,0,0])])}function N(){var e="INSERT INTO STATISTICS_OVERALL_METRICS (TOTAL_GAMES_PLAYED) VALUES (?)";return t.execute(_,e,[0])}function L(){var e=p(),n=e.winningScore,r=e.winningScoreExceeded,a=e.threeMisses,i=[0,n,r,a],o="INSERT INTO GAME_SETTINGS (IS_CUSTOM, WINNING_SCORE, WINNING_SCORE_EXCEEDED, THREE_MISSES) VALUES (?,?,?,?)";return t.execute(_,o,i)}function C(){var e=["english"],n="INSERT INTO APP_SETTINGS (LANGUAGE) VALUES (?)";return t.execute(_,n,e)}function b(){var e=[1],n="INSERT INTO GAME_TUTORIAL (SHOW_INVITE) VALUES (?)";return t.execute(_,n,e)}function $(){var e=[],n="SELECT * FROM PLAYERS";return t.execute(_,n).then(function(t){for(var n=0;n<t.rows.length;n++){var r=t.rows.item(n);e.push({id:r.ID,firstName:r.FIRSTNAME,lastName:r.LASTNAME,tagline:r.TAGLINE,face:r.FACE,statistics:{}})}return e})}var _={},x=[],G={},D={},k={},H={},j={initBrowserDev:n,initDatabase:r,initPlayers:a,initPlayerStatistics:i,initOverallStatistics:o,initGameSettings:s,initAppSettings:c,initGameTutorial:u,getAllPlayers:l,getOverallStatistics:f,getGameSettings:d,getDefaultGameSettings:p,getAppSettings:g,getGameTutorial:v,updatePlayerStatistics:h,updateOverallStatistics:m,updateGameSettings:E,updateAppSettings:S,updateGameTutorial:y,updatePlayerProfile:T,addPlayer:A,removePlayer:w};return j}angular.module("molkkyscore").factory("dataService",t),t.$inject=["$cordovaSQLite","$q"]}(),function(){"use strict";function t(t,e,n,r,a,i){function o(){}function s(){var t=n.alert({title:r.instant("HOME.SETTINGS.TABS.GAME.CUSTOM-TOGGLE.POPUP.TITLE"),template:r.instant("HOME.SETTINGS.TABS.GAME.CUSTOM-TOGGLE.POPUP.TEXT"),okText:r.instant("HOME.GENERAL.CONFIRM.OK")});t.then(function(t){})}function c(t,e){var n="",r=_.omit(t.app,u(e.app)),i=_.omit(t.game,u(e.game));_.isEmpty(r)||(n=Object.keys(r)[0],a.updateAppParameter(n,l.parameters.app[n])),_.isEmpty(i)||a.updateGameParameter()}function u(t){return function(e,n){return t[n]===e}}var l=this,f=i.getMessages().settings;l.activeTabIndex=0,l.options=a.getOptions(),l.parameters=a.getParameters(),o(),e.$on("$translateChangeSuccess",function(){f=i.getMessages().settings}),t.$watch(function(){return l.parameters.game.isCustom},function(t,e){t!==e&&t&&s()}),t.$watch(function(){return l.parameters},function(t,e){_.isEqual(t,e)||(c(t,e),i.show(f.update))},!0)}angular.module("molkkyscore").controller("SettingsCtrl",t),t.$inject=["$scope","$rootScope","$ionicPopup","$translate","settingsService","toast"]}(),function(){"use strict";function t(t,e){function n(){return{app:{language:[{value:"English",key:"english"},{value:"Franais",key:"french"}]},game:{winningScore:[25,50,100],winningScoreExceeded:["to zero","halved","half of winning score"],threeMisses:["to zero","halved","disqualified"]}}}function r(){return _.isEmpty(s)&&(s.app=e.getAppSettings(),s.game=e.getGameSettings()),s}function a(n,r){switch(s.app[n]=r,n){case"language":t.use(r)}e.updateAppSettings()}function i(){e.updateGameSettings()}function o(t){_.extendOwn(t,e.getDefaultGameSettings())}var s={},c={getOptions:n,getParameters:r,updateGameParameter:i,updateAppParameter:a,assignDefaultGameParameters:o};return c}angular.module("molkkyscore").factory("settingsService",t),t.$inject=["$translate","dataService"]}(),function(){"use strict";function t(t,e,n){function r(){}function a(t){return!i.metric.unit||t.statistics.rawData.gamesPlayed>=5}var i=this;i.metric=e.getMetric(parseInt(t.metricId,10)),i.players=n.all(),i.minGamesFilter=a,r()}angular.module("molkkyscore").controller("StatisticsListingCtrl",t),t.$inject=["$stateParams","statisticsService","playersService"]}(),function(){"use strict";function t(t,e,n){function r(t,e,r){var c=e.scoreHistory.length;switch(t){case"playerWonGame":a(e,n.getOverallStatistics(),r);break;case"playerReachedMaxScore":i(e,c,r);break;case"playerThrowsSinglePin":o(e,r);break;case"playerThrow":s(e,c,r)}e.guestColor||n.updatePlayerStatistics(e)}function a(e,r,a){var i=t.getParticipants(),o=a?-1:1;n.getOverallStatistics().totalGamesPlayed+=o,n.updateOverallStatistics(),e.guestColor||(e.statistics.rawData.gamesWon+=o,c("totalWins",e)),i.forEach(function(t){t.statistics&&(t.statistics.rawData.gamesPlayed+=o)}),c("winningRatio",i)}function i(t,e,n){if(!t.guestColor){var r=n?-1:1;t.statistics.rawData.gamesReachedMaxScore+=r,t.statistics.rawData.throwsInGamesReachedMaxScore+=e*r,c("efficiency",t)}}function o(t,e){if(!t.guestColor){var n=e?-1:1;t.statistics.rawData.throwsSinglePin+=n}}function s(t,e,n){if(!t.guestColor){var r=n?-1:1;t.statistics.rawData["throws"]+=r,c("accuracy",t)}}function c(t,e){switch(t){case"totalWins":u(e);break;case"winningRatio":f(e);break;case"versatility":l(e);break;case"accuracy":d(e);break;case"efficiency":p(e)}}function u(t){var e=t.statistics.rawData.gamesWon;t.statistics.metrics.totalWins=e}function l(t){var e=t.statistics.metrics.accuracy,n=t.statistics.metrics.efficiency,r=t.statistics.metrics.winningRatio;t.statistics.metrics.versatility=Math.round((e+n+r)/3)}function f(t){var e,n;t.forEach(function(t){t.statistics&&(e=t.statistics.rawData.gamesWon,n=t.statistics.rawData.gamesPlayed,t.statistics.metrics.winningRatio=Math.round(e/n*100),c("versatility",t))})}function d(t){var e=t.statistics.rawData.throwsSinglePin,n=t.statistics.rawData["throws"];t.statistics.metrics.accuracy=Math.round(e/n*100),c("versatility",t)}function p(t){var e=g(),n=t.statistics.rawData.throwsInGamesReachedMaxScore,r=t.statistics.rawData.gamesReachedMaxScore,a=n/r;t.statistics.metrics.efficiency=Math.round(e/a*100),c("versatility",t)}function g(){var t=0,n=e.getParameters().game.winningScore;switch(n){case 25:t=3;break;case 50:t=5;break;case 100:t=9}return t}var v={update:r};return v}angular.module("molkkyscore").factory("statisticsProcessor",t),t.$inject=["gameService","settingsService","dataService"]}(),function(){"use strict";function t(t,e,n,r,a,i){function o(){s(),c()}function s(){i.fromTemplateUrl(r+"/statistics/modal-statistics-info.html",{scope:f,animation:"slide-in-up"}).then(function(t){l.statisticsInfoModal=t,f.viewModel={modal:l.statisticsInfoModal}})}function c(){d.$on("popover.hidden",function(){angular.element(document).find("body").removeClass("popover-open")}),a.fromTemplateUrl(r+"/statistics/popover-statistics-item-info.html",{scope:d}).then(function(t){l.statsItemsInfoPopover=t}),d.viewModel={metric:{}}}function u(t,e){d.viewModel.metric=e,l.statsItemsInfoPopover.show(t),t.stopPropagation(),t.preventDefault()}var l=this,f=t.$new(!0),d=t.$new(!0);l.metrics=e.getMetrics(),l.overallStatistics=e.getOverallStatistics(),l.gameSettings=n.getParameters().game,l.statisticsInfoModal={},l.statsItemsInfoPopover={},l.showItemInfo=u,o()}angular.module("molkkyscore").controller("StatisticsCtrl",t),t.$inject=["$scope","statisticsService","settingsService","TEMPLATES_ROOT","$ionicPopover","$ionicModal"]}(),function(){"use strict";function t(t,e,n,r,a){function i(){return d}function o(t){return _.findWhere(d,{id:t})}function s(t){return _.findWhere(d,{keyName:t})}function c(){return _.isEmpty(p)&&(p=e.getOverallStatistics()),p}function u(t){return t.statistics={rawData:{"throws":0,throwsSinglePin:0,throwsInGamesReachedMaxScore:0,gamesPlayed:0,gamesReachedMaxScore:0,gamesWon:0},metrics:{}},i().forEach(function(e){"players"===e.category&&(t.statistics.metrics[e.keyName]=0)}),t}function l(t,e,n){a.getParameters().game.isCustom||r.update(t,e,n)}function f(t,e,n,r,a){return{id:t,keyName:e,category:n,translationId:r,unit:a}}var d=[f(0,"totalGamesPlayed","overall","OVERALL.TOTAL-GAMES-PLAYED",""),f(1,"totalWins","players","PLAYERS.TOTAL-WINS",""),f(3,"versatility","players","PLAYERS.VERSATILITY","%"),f(2,"winningRatio","players","PLAYERS.WINNING-RATIO","%"),f(4,"accuracy","players","PLAYERS.ACCURACY","%"),f(5,"efficiency","players","PLAYERS.EFFICIENCY","%")],p={},g={getMetrics:i,getMetric:o,getMetricByKey:s,getOverallStatistics:c,initPlayerStatistics:u,updateStatistics:l};return g}angular.module("molkkyscore").factory("statisticsService",t),t.$inject=["$translate","dataService","gameService","statisticsProcessor","settingsService"]}(),function(){"use strict";function t(t,e){function n(e){window.cordova&&t.showWithOptions({message:e,duration:"short",position:"top",styling:{cornerRadius:4}})}function r(){return{start:{maxParticipants:e.instant("HOME.START.TOASTS.MAX-PARTICIPANTS")},game:{undoLast:e.instant("HOME.GAME.TOASTS.UNDO-LAST"),threeMisses:e.instant("HOME.GAME.TOASTS.THREE-MISSES"),maxScoreExceeded:e.instant("HOME.GAME.TOASTS.MAX-SCORE-EXCEEDED"),winner:e.instant("HOME.GAME.TOASTS.WINNER")},players:{addPlayer:e.instant("HOME.PLAYERS.TOASTS.ADD-PLAYER"),removePlayer:e.instant("HOME.PLAYERS.TOASTS.REMOVE-PLAYER"),requiredFields:e.instant("HOME.PLAYERS.TOASTS.REQUIRED-FIELDS"),updateSaved:e.instant("HOME.PLAYERS.TOASTS.UPDATE-SAVED")},settings:{update:e.instant("HOME.SETTINGS.TOASTS.UPDATE")}}}var a={show:n,getMessages:r};return a}angular.module("molkkyscore").factory("toast",t),t.$inject=["$cordovaToast","$translate"]}(),function(){"use strict";function t(t,e,n,r){function a(t){function a(t){return t>f?(l.$emit("tutorial:finished"),void u.remove()):void r(function(){c(t).triggerHandler("click")})}l=t,n.fromTemplateUrl(e+"/tutorial/popover.html",{scope:l,backdropClickToClose:!1,hardwareBackButtonClose:!1}).then(function(t){u=t,a(1)}),l.viewModel={progressStep:0,progressSteps:f,triggerProceed:a}}function i(t){switch(l.viewModel.progressStep=l.viewModel.progressStep+1,l.viewModel.progressStep){case 2:p=!1;break;case 3:p=!0;break;case 4:p=!0;break;case 5:p=!0}return u.hide().then(function(){l.viewModel.titleTranslationId="HOME.TUTORIAL.INFO-POPOVER.STEP-"+l.viewModel.progressStep+".TITLE",l.viewModel.textTranslationId="HOME.TUTORIAL.INFO-POPOVER.STEP-"+l.viewModel.progressStep+".TEXT",u.show(t)})}function o(){return p}function s(){return!(!u||_.isEmpty(u))&&(d=l.viewModel.progressStep<f)}function c(t){var e="";switch(t){case 1:e="score-12";break;case 2:e="score-12";break;case 3:e="player-cell";break;case 4:e="scoreboard";break;case 5:e="settings"}return angular.element(document.getElementById(e))}var u={},l={},f=5,d=!1,p=!1,g={startTutorial:a,proceedTutorial:i,isPreventClickHandler:o,isTutorialOngoing:s};return g}angular.module("molkkyscore").factory("tutorialService",t),t.$inject=["dataService","TEMPLATES_ROOT","$ionicPopover","$timeout"]}();